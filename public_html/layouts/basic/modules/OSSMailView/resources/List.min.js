
Vtiger_List_Js("OSSMailView_List_Js",{bindMails:function(b){var c=Vtiger_List_Js.getInstance();var a=c.checkListRecordSelected();if(a!=true){if(!confirm(app.vtranslate("JS_BIND_CONFIRM"))){return false}var d={};d.data={module:"OSSMailView",action:"BindMails"};$.extend(d.data,Vtiger_List_Js.getSelectedRecordsParams());d.async=false;AppConnector.request(d).done(function(e){Vtiger_Helper_Js.showPnotify({text:e.result,delay:"4000",type:"success"})})}else{c.noRecordSelectedAlert()}},triggerChangeTypeForm:function(){var b=Vtiger_List_Js.getInstance();var a=b.readSelectedIds(true);$("#ChangeType").submit(function(e){var d=jQuery("#mail_type").val();var c={};c.data={module:"OSSMailView",action:"ChangeType",data:a,mail_type:d};c.async=false;AppConnector.request(c).done(function(f){var g={title:app.vtranslate("JS_MESSAGE"),text:f.result,animation:"show",type:"info"};Vtiger_Helper_Js.showPnotify(g);Vtiger_List_Js.clearList();b.getListViewRecords();app.hideModalWindow()});e.preventDefault()})},triggerChangeType:function(b){var e=this;var d=Vtiger_List_Js.getInstance();var a=d.checkListRecordSelected();if(a!=true){e.getRelatedModulesContainer=false;var c={type:"POST",url:b,dataType:"html",data:{}};AppConnector.request(c).then(function(f){if(f){app.showModalWindow(f,function(g){e.triggerChangeTypeForm()})}})}else{d.noRecordSelectedAlert()}},},{});