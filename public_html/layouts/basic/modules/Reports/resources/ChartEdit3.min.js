
Reports_Edit3_Js("Reports_ChartEdit3_Js",{registerFieldForChosen:function(){app.changeSelectElementView(jQuery("#groupbyfield"),"select2");app.changeSelectElementView(jQuery("#datafields"),"select2")},initSelectValues:function(){var g=jQuery("#groupbyfield");var d=jQuery("#datafields");var c=jQuery("input[name=groupbyfield]").val();var b=jQuery("input[name=datafields]").val();var f=jQuery("#groupbyfield_element").clone().html();var e=jQuery("#datafields_element").clone().html();g.html(f);d.html(e);if(b){b=JSON.parse(b)}var a=jQuery("input[name=charttype]").val();g.select2().val(c).trigger("change");if(a=="pieChart"){d.attr("multiple",false).select2().val(b).trigger("change")}else{if(b&&b[0]){d.attr("multiple",true).select2({maximumSelectionLength:3,closeOnSelect:false}).val(b).trigger("change")}}if(a){jQuery("ul[name=charttab] li.active").removeClass("active");jQuery("ul[name=charttab] li a[data-type="+a+"]").addClass("active contentsBackground backgroundColor").trigger("click")}else{jQuery("ul[name=charttab] li a[data-type=pieChart]").addClass("contentsBackground backgroundColor").trigger("click")}}},{initialize:function(a){if(typeof a=="undefined"){a=jQuery("#chart_report_step3")}if(a.is("#chart_report_step3")){this.setContainer(a)}else{this.setContainer(jQuery("#chart_report_step3"))}},registerForChartTabClick:function(){var a=jQuery("#datafields");jQuery("ul[name=charttab] li a").on("click",function(c){var b=jQuery(c.currentTarget).data("type");if(b=="pieChart"){a.attr("multiple",false).select2().val("").trigger("change")}else{a.attr("multiple",true).select2({maximumSelectionLength:3})}jQuery("input[name=charttype]").val(b);jQuery("ul[name=charttab] li.active a").removeClass("contentsBackground backgroundColor");jQuery(this).addClass("contentsBackground backgroundColor")})},calculateValues:function(){var a=jQuery("#advanced_filter","#chart_report_step2").val();jQuery("#advanced_filter","#chart_report_step3").val(a)},registerSubmitEvent:function(){var a=this;jQuery("#generateReport").on("click",function(f){var c=jQuery("#groupbyfield").val();var b=jQuery("#datafields").val();var d=a.getContainer();if(b!=""&&c!=""){jQuery("#s2id_groupbyfield").validationEngine("hideAll");d.submit()}else{jQuery("#s2id_groupbyfield").validationEngine("showPrompt",app.vtranslate("JS_PLEASE_SELECT_ATLEAST_ONE_OPTION"),"","bottomRight",true);f.preventDefault()}})},registerEvents:function(){this._super();this.calculateValues();this.registerForChartTabClick();Reports_ChartEdit3_Js.registerFieldForChosen();Reports_ChartEdit3_Js.initSelectValues()}});