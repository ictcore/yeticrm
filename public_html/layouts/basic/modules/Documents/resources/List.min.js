
Vtiger_List_Js("Documents_List_Js",{massMove:function(c){var b=Vtiger_List_Js.getInstance();var e=b.checkListRecordSelected();if(e!=true){var i=b.readSelectedIds(true);var j=b.readExcludedIds(true);var d=b.getCurrentCvId();var f={selected_ids:i,excluded_ids:j,viewname:d};var a=b.getAlphabetSearchValue();if(a.length>0){f.search_key=b.getAlphabetSearchField();f.search_value=a;f.operator="s"}var g={url:c,data:f};var h=jQuery.progressIndicator();AppConnector.request(g).then(function(l){h.progressIndicator({mode:"hide"});var k=function(m){b.moveDocuments().then(function(p){if(p){var n=p.result;if(n.success){app.hideModalWindow();Vtiger_Helper_Js.showPnotify({title:app.vtranslate("JS_MOVE_DOCUMENTS"),text:n.message,delay:"2000",type:"success"});var o=b.getDefaultParams();b.getListViewRecords(o)}else{Vtiger_Helper_Js.showPnotify({title:app.vtranslate("JS_OPERATION_DENIED"),text:n.message,delay:"2000",type:"error"})}}})};app.showModalWindow(l,k)})}else{b.noRecordSelectedAlert()}}},{moveDocuments:function(){var a=jQuery.Deferred();jQuery("#moveDocuments").on("submit",function(c){var b=jQuery(c.currentTarget).serializeFormData();AppConnector.request(b).then(function(d){a.resolve(d)});c.preventDefault()});return a.promise()},registerDeleteFilterClickEvent:function(){var a=this;var b=this.getFilterBlock();if(b!=false){b.on("mouseup","li span.deleteFilter",function(d){a.getFilterSelectElement().data("select2").close();var e=jQuery(d.currentTarget).closest(".select2-results__option");var c=app.vtranslate("JS_LBL_ARE_YOU_SURE_YOU_WANT_TO_DELETE");if(e.hasClass("folderOption")){if(e.find(".deleteFilter").hasClass("dull")){Vtiger_Helper_Js.showPnotify(app.vtranslate("JS_FOLDER_IS_NOT_EMPTY"));return}else{Vtiger_Helper_Js.showConfirmationBox({message:c}).then(function(h){var g=a.getSelectOptionFromChosenOption(e);var f=g.data("folderid");var i={module:app.getModuleName(),mode:"delete",action:"Folder",folderid:f};AppConnector.request(i).then(function(j){if(j.success){g.remove();a.getFilterSelectElement().trigger("change")}})},function(f,g){})}}else{Vtiger_Helper_Js.showConfirmationBox({message:c}).then(function(g){var f=a.getSelectOptionFromChosenOption(e);AppConnector.requestForm(f.data("deleteurl"))},function(f,g){})}})}}});