
jQuery.Class("Vtiger_EditFieldByModal_Js",{getInstance:function(){var c=jQuery("#moduleBasic").val();if(typeof c!="undefined"){var b=c+"_EditFieldByModal_Js"}var d=Vtiger_EditFieldByModal_Js;if(typeof window[b]!="undefined"){var a=new window[b]()}else{var a=new d()}return a}},{formElement:false,moduleName:false,registerEditState:function(){var b=this;var a=this.getForm();a.find(".editState").on("click",function(d){var c=jQuery(d.currentTarget);c.closest(".modal").addClass("hide");b.editState(c)})},editState:function(c){var a=this;var d={module:this.moduleName,action:"EditFieldByModal",param:{record:c.data("id"),state:c.data("state"),fieldName:c.closest(".fieldButton").data("name")}};app.hideModalWindow();var b=jQuery.progressIndicator({position:"html",blockInfo:{enabled:true}});AppConnector.request(d).then(function(g){if(g.success){var h=app.getViewName();if(h==="Detail"){if(app.getModuleName()==a.moduleName){window.location.reload()}else{Vtiger_Detail_Js.reloadRelatedList();b.progressIndicator({mode:"hide"})}}if(h=="List"){var f=new Vtiger_List_Js();f.getListViewRecords()}if(h=="DashBoard"){var e=new Vtiger_DashBoard_Js();e.getContainer().find('a[name="drefresh"]').trigger("click");b.progressIndicator({mode:"hide"})}}else{return false}},function(e){})},registerHelpInfo:function(){var a=this.getForm();var b=app.showPopoverElementView(a.find(".helpInfoPopover"),{trigger:"click",html:true});b.trigger("click").trigger("click");b.on("shown.bs.popover",function(g,d){var c=jQuery(g.currentTarget);var f=c.next();app.showScrollBar(f.find(".popover-content"),{height:"300px",railVisible:true,})})},getForm:function(){if(this.formElement==false){this.setForm(jQuery("#modalEditFieldByModal"))}return this.formElement},setForm:function(a){this.formElement=a;return this},setModule:function(a){this.moduleName=this.getForm().find(".moduleBasic").val()},registerEvents:function(){this.setModule();this.registerEditState();this.registerHelpInfo();this.getForm().find(".convert").each(function(){var a=jQuery(this).text();jQuery(this).text(a)})}});jQuery(document).ready(function(a){var b=function(){var c=Vtiger_EditFieldByModal_Js.getInstance();c.registerEvents()};window.setTimeout(b,10)});