jQuery.Class("Settings_Notifications_List_Js",{},{registerSave:function(a,e){var c=this;var d=a.find(".validationEngineContainer");var b=$('[name="roleMenu"]').val();d.validationEngine(app.validationEngineOptions);a.find('[name="saveButton"]').on("click",function(){if(d.validationEngine("validate")){var g={module:app.getModuleName(),parent:app.getParentModuleName(),action:"SaveAjax",mode:"saveType",name:a.find('[name="name"]').val(),width:a.find('[name="width"]').val(),height:a.find('[name="height"]').val(),roleId:b,id:e};var f=jQuery.progressIndicator();AppConnector.request(g).then(function(h){f.progressIndicator({mode:"hide"});app.hideModalWindow();c.showTable()})}})},registerButtons:function(){var a=this;$(".createNotification").on("click",function(){var b=jQuery.progressIndicator();app.showModalWindow(null,"index.php?module=Notifications&parent=Settings&view=CreateNotification",function(c){b.progressIndicator({mode:"hide"});a.registerSave(c,0)})});$('[name="roleMenu"]').on("change",function(){a.showTable()})},showTable:function(){var c=this;var a=$(".listWithNotifications");var d={module:app.getModuleName(),parent:app.getParentModuleName(),view:"ListContent",roleId:$('[name="roleMenu"]').val(),};var b=jQuery.progressIndicator();AppConnector.request(d).then(function(e){b.progressIndicator({mode:"hide"});a.html(e);c.registerTableEvents(a)})},registerTableEvents:function(a){var b=this;a.find(".edit").on("click",function(f){var d=$(f.currentTarget);var c=jQuery.progressIndicator();app.showModalWindow(null,d.data("url"),function(e){c.progressIndicator({mode:"hide"});var g=d.closest("tr");b.registerSave(e,g.data("id"))})});a.find(".remove").on("click",function(g){var f=jQuery(g.currentTarget);var c=f.closest("tr");var d=app.vtranslate("JS_DELETE_CONFIRMATION");Vtiger_Helper_Js.showConfirmationBox({message:d}).then(function(i){var j={module:app.getModuleName(),parent:app.getParentModuleName(),action:"Delete",id:c.data("id")};var h=jQuery.progressIndicator();AppConnector.request(j).then(function(e){h.progressIndicator({mode:"hide"});b.showTable()})},function(e,h){})})},registerEvents:function(){this.registerButtons();this.showTable()}});