jQuery.Class("Settings_Users_SwitchUsers_Js",{},{registerAdd:function(b){var a=this;b.find(".addItem").click(function(h){var f=[];b.find(".switchUsersTable tbody tr").each(function(e){f.push({user:$(this).find(".sufrom").val(),})});var i=parseInt(b.find("#suCount").val())+1;var g=$(h.currentTarget);var d=b.find(".cloneItem tbody").clone(true,true);var c=d.find(".sufrom option");c.each(function(e,j){$.each(f,function(l,k){if($(j).val()==k.user){d.find(j).remove()}})});d.find("tr").attr("data-id",i).addClass("row"+i);b.find(".switchUsersTable tbody").append(d.html());b.find("#suCount").val(i);a.registerDelete(b.find("tr.row"+i));app.showSelect2ElementView(b.find("tr.row"+i).find("select"))})},registerDelete:function(a){a.find(".delate").click(function(c){var b=$(c.currentTarget);b.closest("tr").remove()})},registerSave:function(b){var a=this;b.find(".saveItems").click(function(d){var c=[];b.find(".switchUsersTable tbody tr").each(function(e){if($(this).find(".suto :selected").length>0){c.push({user:$(this).find(".sufrom").val(),access:$(this).find(".suto").val(),})}});app.saveAjax("saveSwitchUsers",c).then(function(e){Settings_Vtiger_Index_Js.showMessage({type:"success",text:e.result.message})})})},registerEvents:function(){var a=$(".contentsDiv");this.registerAdd(a);this.registerDelete(a);this.registerSave(a)}});