
Settings_MappedFields_Edit_Js("Settings_MappedFields_Edit1_Js",{},{init:function(){this.initialize()},getContainer:function(){return this.step1Container},setContainer:function(a){this.step1Container=a;return this},initialize:function(a){if(typeof a==="undefined"){a=jQuery("#mf_step1")}if(a.is("#mf_step1")){this.setContainer(a)}else{this.setContainer(jQuery("#mf_step1"))}},submit:function(){var b=jQuery.Deferred();var c=this.getContainer();var e=c.serializeFormData();e.async=false;var a=c.serializeFormData();a.step=1;a.async=false;if(this.checkModulesName()){var d=jQuery.progressIndicator({position:"html",blockInfo:{enabled:true}});app.saveAjax("step1",a).done(function(f){if(f.success==true){if(!f.result.id&&f.result.message){Settings_Vtiger_Index_Js.showMessage({text:f.result.message,type:"error"});b.resolve(false);d.progressIndicator({mode:"hide"});return false}Settings_Vtiger_Index_Js.showMessage({text:app.vtranslate("JS_MF_SAVED_SUCCESSFULLY")});var g=jQuery('[name="record"]',c);if(g.val()===""){g.val(f.result.id);e.record=f.result.id}e.record=f.result.id;AppConnector.request(e).done(function(h){c.hide();d.progressIndicator({mode:"hide"});b.resolve(h)},function(h,i){app.errorLog(h,i)})}})}return b.promise()},registerCancelStepClickEvent:function(a){jQuery("button.cancelLink",a).on("click",function(){window.history.back()})},checkModulesName:function(){var a=jQuery('[name="tabid"]').val();var b=jQuery('[name="reltabid"]').val();if(a==b){var c={text:app.vtranslate("JS_YOU_CAN_NOT_SELECT_THE_SAME_MODULES"),type:"error"};Settings_Vtiger_Index_Js.showMessage(c);return false}return true},registerEvents:function(){var a=this.getContainer();a.find('[type="submit"]').removeAttr("disabled");var b=app.validationEngineOptions;b.onValidationComplete=function(d,c){return c};b.promptPosition="bottomRight";a.validationEngine(b);this.registerCancelStepClickEvent(a)}});