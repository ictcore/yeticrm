
jQuery.Class("Settings_Vtiger_ConfigEditor_Js",{},{saveConfigEditor:function(b){var a=jQuery.Deferred();var c=b.serializeFormData();var d={};jQuery.each(c,function(f,g){d[f]=g});var e={module:app.getModuleName(),parent:app.getParentModuleName(),action:"ConfigEditorSaveAjax",updatedFields:JSON.stringify(d)};AppConnector.request(e).then(function(f){a.resolve(f)},function(f,g){a.reject()});return a.promise()},loadContents:function(b){var a=jQuery.Deferred();AppConnector.requestPjax(b).then(function(c){a.resolve(c)},function(c,d){a.reject()});return a.promise()},registerEditViewEvents:function(){var d=this;var c=jQuery("#ConfigEditorForm");var b=c.data("detailUrl");app.showSelect2ElementView(c.find("select.select2"),{dropdownCss:{"z-index":0}});var e=app.validationEngineOptions;e.onValidationComplete=function(g,f){if(f){var h=jQuery.progressIndicator({position:"html",blockInfo:{enabled:true}});d.saveConfigEditor(g).then(function(i){var j={};if(i.success){j.text=app.vtranslate("JS_CONFIGURATION_DETAILS_SAVED");d.loadContents(b).then(function(k){h.progressIndicator({mode:"hide"});jQuery(".contentsDiv").html(k);d.registerDetailViewEvents()})}else{h.progressIndicator({mode:"hide"});j.text=i.error["message"];j.type="error"}Settings_Vtiger_Index_Js.showMessage(j)},function(i,j){h.progressIndicator({mode:"hide"})});return f}};c.validationEngine(e);c.submit(function(f){f.preventDefault()});var a=c.find(".cancelLink");a.click(function(){var f=jQuery.progressIndicator({position:"html",blockInfo:{enabled:true}});d.loadContents(b).then(function(g){f.progressIndicator({mode:"hide"});jQuery(".contentsDiv").html(g);d.registerDetailViewEvents()})})},registerDetailViewEvents:function(){var b=this;var a=jQuery("#ConfigEditorDetails");var c=a.find(".editButton");c.click(function(){var d=c.data("url");var e=jQuery.progressIndicator({position:"html",blockInfo:{enabled:true}});b.loadContents(d).then(function(f){e.progressIndicator({mode:"hide"});jQuery(".contentsDiv").html(f);b.registerEditViewEvents()},function(f,g){e.progressIndicator({mode:"hide"})})})},registerEvents:function(){if(jQuery("#ConfigEditorDetails").length>0){this.registerDetailViewEvents()}else{this.registerEditViewEvents()}}});jQuery(document).ready(function(b){var a=new Settings_Vtiger_ConfigEditor_Js();a.registerEvents()});Vtiger_WholeNumberGreaterThanZero_Validator_Js("Vtiger_NumberRange5_Validator_Js",{invokeValidation:function(d,f,c,b){var e=new Vtiger_NumberRange5_Validator_Js();e.setElement(d);var a=e.validate();if(a!=true){return e.getError()}}},{validate:function(){var a=this._super();if(a!=true){return a}else{var b=this.getFieldValue();if(b<1||b>5){var c=app.vtranslate("JS_PLEASE_ENTER_NUMBER_IN_RANGE_1TO5");this.setError(c);return false}return true}}});Vtiger_WholeNumberGreaterThanZero_Validator_Js("Vtiger_NumberRange2_Validator_Js",{invokeValidation:function(d,f,c,b){var e=new Vtiger_NumberRange5_Validator_Js();e.setElement(d);var a=e.validate();if(a!=true){return e.getError()}}},{validate:function(){var a=this._super();if(a!=true){return a}else{var b=this.getFieldValue();if(b<1||b>2){var c=app.vtranslate("JS_PLEASE_ENTER_NUMBER_IN_RANGE_1TO2");this.setError(c);return false}return true}}});Vtiger_WholeNumberGreaterThanZero_Validator_Js("Vtiger_NumberRange100_Validator_Js",{invokeValidation:function(d,f,c,b){var e=new Vtiger_NumberRange100_Validator_Js();e.setElement(d);var a=e.validate();if(a!=true){return e.getError()}}},{validate:function(){var a=this._super();if(a!=true){return a}else{var b=this.getFieldValue();if(b<1||b>100){var c=app.vtranslate("JS_PLEASE_ENTER_NUMBER_IN_RANGE_1TO100");this.setError(c);return false}return true}}});