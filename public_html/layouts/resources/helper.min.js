
jQuery.Class("Vtiger_Helper_Js",{checkServerConfigResponseCache:"",langCode:"",setLangCode:function(){var a=document.getElementsByTagName("html")[0];this.langCode=a.getAttribute("lang")?a.getAttribute("lang"):"en"},getLangCode:function(){if(!this.langCode){this.setLangCode()}return this.langCode},getEmailMassEditInstance:function(){var a="Emails_MassEdit_Js";var b=new window[a]();return b},getDayFromDate:function(b){var a=this.getDay(b);return this.getLabelDayFromDate(a)},getDay:function(b){var a=new Date(b);if(isNaN(a.getDay())){a=Date.parse(b)}return a.getDay()},getLabelDayFromDate:function(c){var b=c;var a="";switch(b){case 0:a="JS_SUN";break;case 1:a="JS_MON";break;case 2:a="JS_TUE";break;case 3:a="JS_WED";break;case 4:a="JS_THU";break;case 5:a="JS_FRI";break;case 6:a="JS_SAT";break}return app.vtranslate(a)},getDateInstance:function(n,b){var c=n.split(" ");var e=c[0];var d=c[1];var m="00";var o="-";if(b.indexOf("-")!=-1){o="-"}if(b.indexOf(".")!=-1){o="."}if(b.indexOf("/")!=-1){o="/"}var h=e.split(o);var j=b.split(o);var l=h[j.indexOf("yyyy")];var k=h[j.indexOf("mm")];var f=h[j.indexOf("dd")];var a=Date.parse(l+o+k+o+f);if((l.length>4)||(k.length>2)||(f.length>2)||(a==null)){var i=app.vtranslate("JS_INVALID_DATE");throw i}if(typeof d=="undefined"){d="00:00:00"}var g=d.split(":");if(typeof g[2]!="undefined"){m=g[2]}if(typeof c[2]!="undefined"){d+=" "+c[2];if(c[2].toLowerCase()=="pm"&&g[0]!="12"){g[0]=parseInt(g[0],10)+12}if(c[2].toLowerCase()=="am"&&g[0]=="12"){g[0]="00"}}k=k-1;var a=new Date(l,k,f,g[0],g[1],m);return a},showConfirmationBox:function(c){var b=jQuery.Deferred();bootbox.setLocale(this.getLangCode());var a=bootbox.confirm(c.message,function(d){if(d){b.resolve()}else{b.reject()}});a.on("hidden",function(d){if(jQuery("#globalmodal").length>0){jQuery("body").addClass("modal-open")}});return b.promise()},showMessage:function(a){if(typeof a.type=="undefined"){a.type="info"}a.animation="show";a.title=app.vtranslate("JS_MESSAGE");Vtiger_Helper_Js.showPnotify(a)},showPnotify:function(b){var a=b;if(typeof b=="string"){var a={};a.text=b}var c={hide:false,delay:"3000",type:"error",styling:"bootstrap3",buttons:{sticker:false,labels:{close:app.vtranslate("JS_CLOSE")}}};if(typeof b.type!="undefined"&&b.type!="error"){c.hide=true;c.animate_speed=1}if(typeof a!="undefined"){var c=jQuery.extend(c,a)}return new PNotify(c)},hidePnotify:function(a){if(typeof a=="undefined"){a=jQuery(".ui-pnotify")}a.remove()},addClickOutSideEvent:function(b,a){b.one("clickoutside",a)},showHorizontalTopScrollBar:function(){var a=jQuery(".contentsDiv");var b=jQuery(".contents-topscroll",a);var c=jQuery(".contents-bottomscroll",a);jQuery(".bottomscroll-div",a).attr("style","");jQuery(".topscroll-div",a).css("width",jQuery(".bottomscroll-div",a).outerWidth());jQuery(".bottomscroll-div",a).css("width",jQuery(".topscroll-div",a).outerWidth());b.scroll(function(){c.scrollLeft(b.scrollLeft())});c.scroll(function(){b.scrollLeft(c.scrollLeft())})},convertToDateString:function(e,b,f,j){var m="-";if(b.indexOf("-")!=-1){m="-"}if(b.indexOf(".")!=-1){m="."}if(b.indexOf("/")!=-1){m="/"}var d=e.split(m);var h=b.split(m);var k=d[h.indexOf("yyyy")];var i=d[h.indexOf("mm")];var c=d[h.indexOf("dd")];var a=new Date(k,i-1,c);if((k.length>4)||(i.length>2)||(c.length>2)||(a==null)){var g=app.vtranslate("JS_INVALID_DATE");throw g}var l=a;if("0"==f){if("Calendar"==j){l.setDate(a.getDate()-1)}}else{if("-1"==f){if("Calendar"==j){l.setDate(a.getDate()-2)}else{l.setDate(a.getDate()-1)}}else{if("Calendar"!=j){l.setTime(a.getTime()+parseInt(f)*24*60*60*1000)}}}return app.getStringDate(l)},hideOptions:function(b,a,c){var d="";b.find("option").each(function(e,f){f=$(f);if(c!=f.data(a)){f.addClass("hide");f.attr("disabled","disabled")}else{if(d==""){d=f.val()}f.removeClass("hide");f.removeAttr("disabled")}});b.val(d);b.trigger("chosen:updated")},unique:function(a){return a.filter(function(d,c,b){return c===b.indexOf(d)})}},{});