/*! AutoFill 1.2.1
 * Â©2008-2014 SpryMedia Ltd - datatables.net/license
 */
(function(c,a,d){var b=function(g,f){var e=function(h,i){if(!(this instanceof e)){throw ("Warning: AutoFill must be initialised with the keyword 'new'")}if(!g.fn.dataTableExt.fnVersionCheck("1.7.0")){throw ("Warning: AutoFill requires DataTables 1.7 or greater")}this.c={};this.s={filler:{height:0,width:0},border:{width:2},drag:{startX:-1,startY:-1,startTd:null,endTd:null,dragging:false},screen:{interval:null,y:0,height:0,scrollTop:0},scroller:{top:0,bottom:0},columns:[]};this.dom={table:null,filler:null,borderTop:null,borderRight:null,borderBottom:null,borderLeft:null,currentTarget:null};this.fnSettings=function(){return this.s};this._fnInit(h,i);return this};e.prototype={_fnInit:function(p,l){var o=this,n,h;this.s.dt=f.Api?new f.Api(p).settings()[0]:p.fnSettings();this.s.init=l||{};this.dom.table=this.s.dt.nTable;g.extend(true,this.c,e.defaults,l);this._initColumns();var m=g("<div/>",{"class":"AutoFill_filler"}).appendTo("body");this.dom.filler=m[0];this.s.filler.height=m.height();this.s.filler.width=m.width();m[0].style.display="none";var k;var j=a.body;if(o.s.dt.oScroll.sY!==""){o.s.dt.nTable.parentNode.style.position="relative";j=o.s.dt.nTable.parentNode}k=g("<div/>",{"class":"AutoFill_border"});this.dom.borderTop=k.clone().appendTo(j)[0];this.dom.borderRight=k.clone().appendTo(j)[0];this.dom.borderBottom=k.clone().appendTo(j)[0];this.dom.borderLeft=k.clone().appendTo(j)[0];m.on("mousedown.DTAF",function(i){this.onselectstart=function(){return false};o._fnFillerDragStart.call(o,i);return false});g("tbody",this.dom.table).on("mouseover.DTAF mouseout.DTAF",">tr>td, >tr>th",function(i){o._fnFillerDisplay.call(o,i)});g(this.dom.table).on("destroy.dt.DTAF",function(){m.off("mousedown.DTAF").remove();g("tbody",this.dom.table).off("mouseover.DTAF mouseout.DTAF")})},_initColumns:function(){var n=this;var k,h;var m=this.s.dt;var j=this.s.init;for(k=0,h=m.aoColumns.length;k<h;k++){this.s.columns[k]=g.extend(true,{},e.defaults.column)}m.oApi._fnApplyColumnDefs(m,j.aoColumnDefs||j.columnDefs,j.aoColumns||j.columns,function(o,i){n._fnColumnOptions(o,i)});for(k=0,h=m.aoColumns.length;k<h;k++){var l=this.s.columns[k];if(!l.read){l.read=this._fnReadCell}if(!l.write){l.read=this._fnWriteCell}if(!l.step){l.read=this._fnStep}}},_fnColumnOptions:function(h,k){var j=this.s.columns[h];var l=function(i,m){if(k[m[0]]!==d){j[i]=k[m[0]]}if(k[m[1]]!==d){j[i]=k[m[1]]}};l("enable",["bEnable","enable"]);l("read",["fnRead","read"]);l("write",["fnWrite","write"]);l("step",["fnStep","step"]);l("increment",["bIncrement","increment"])},_fnTargetCoords:function(i){var j=g(i).parents("tr")[0];var h=this.s.dt.oInstance.fnGetPosition(i);return{x:g("td",j).index(i),y:g("tr",j.parentNode).index(j),row:h[0],column:h[2]}},_fnUpdateBorder:function(p,q){var n=this.s.border.width,o=g(p).offset(),s=g(q).offset(),k=o.left-n,i=s.left+g(q).outerWidth(),t=o.top-n,r=s.top+g(q).outerHeight(),j=s.left+g(q).outerWidth()-o.left+(2*n),v=s.top+g(q).outerHeight()-o.top+(2*n),u;if(o.left>s.left){k=s.left-n;i=o.left+g(p).outerWidth();j=o.left+g(p).outerWidth()-s.left+(2*n)}if(this.s.dt.oScroll.sY!==""){var h=g(this.s.dt.nTable.parentNode).offset(),l=g(this.s.dt.nTable.parentNode).scrollTop(),m=g(this.s.dt.nTable.parentNode).scrollLeft();k-=h.left-m;i-=h.left-m;t-=h.top-l;r-=h.top-l}u=this.dom.borderTop.style;u.top=t+"px";u.left=k+"px";u.height=this.s.border.width+"px";u.width=j+"px";u=this.dom.borderBottom.style;u.top=r+"px";u.left=k+"px";u.height=this.s.border.width+"px";u.width=j+"px";u=this.dom.borderLeft.style;u.top=t+"px";u.left=k+"px";u.height=v+"px";u.width=this.s.border.width+"px";u=this.dom.borderRight.style;u.top=t+"px";u.left=i+"px";u.height=v+"px";u.width=this.s.border.width+"px"},_fnFillerDragStart:function(j){var h=this;var k=this.dom.currentTarget;this.s.drag.dragging=true;h.dom.borderTop.style.display="block";h.dom.borderRight.style.display="block";h.dom.borderBottom.style.display="block";h.dom.borderLeft.style.display="block";var i=this._fnTargetCoords(k);this.s.drag.startX=i.x;this.s.drag.startY=i.y;this.s.drag.startTd=k;this.s.drag.endTd=k;this._fnUpdateBorder(k,k);g(a).bind("mousemove.AutoFill",function(l){h._fnFillerDragMove.call(h,l)});g(a).bind("mouseup.AutoFill",function(l){h._fnFillerFinish.call(h,l)});this.s.screen.y=j.pageY;this.s.screen.height=g(c).height();this.s.screen.scrollTop=g(a).scrollTop();if(this.s.dt.oScroll.sY!==""){this.s.scroller.top=g(this.s.dt.nTable.parentNode).offset().top;this.s.scroller.bottom=this.s.scroller.top+g(this.s.dt.nTable.parentNode).height()}this.s.screen.interval=setInterval(function(){var l=g(a).scrollTop();var m=l-h.s.screen.scrollTop;h.s.screen.y+=m;if(h.s.screen.height-h.s.screen.y+l<50){g("html, body").animate({scrollTop:l+50},240,"linear")}else{if(h.s.screen.y-l<50){g("html, body").animate({scrollTop:l-50},240,"linear")}}if(h.s.dt.oScroll.sY!==""){if(h.s.screen.y>h.s.scroller.bottom-50){g(h.s.dt.nTable.parentNode).animate({scrollTop:g(h.s.dt.nTable.parentNode).scrollTop()+50},240,"linear")}else{if(h.s.screen.y<h.s.scroller.top+50){g(h.s.dt.nTable.parentNode).animate({scrollTop:g(h.s.dt.nTable.parentNode).scrollTop()-50},240,"linear")}}}},250)},_fnFillerDragMove:function(j){if(j.target&&j.target.nodeName.toUpperCase()=="TD"&&j.target!=this.s.drag.endTd){var i=this._fnTargetCoords(j.target);if(this.c.mode=="y"&&i.x!=this.s.drag.startX){j.target=g("tbody>tr:eq("+i.y+")>td:eq("+this.s.drag.startX+")",this.dom.table)[0]}if(this.c.mode=="x"&&i.y!=this.s.drag.startY){j.target=g("tbody>tr:eq("+this.s.drag.startY+")>td:eq("+i.x+")",this.dom.table)[0]}if(this.c.mode=="either"){if(i.x!=this.s.drag.startX){j.target=g("tbody>tr:eq("+this.s.drag.startY+")>td:eq("+i.x+")",this.dom.table)[0]}else{if(i.y!=this.s.drag.startY){j.target=g("tbody>tr:eq("+i.y+")>td:eq("+this.s.drag.startX+")",this.dom.table)[0]}}}if(this.c.mode!=="both"){i=this._fnTargetCoords(j.target)}var h=this.s.drag;h.endTd=j.target;if(i.y>=this.s.drag.startY){this._fnUpdateBorder(h.startTd,h.endTd)}else{this._fnUpdateBorder(h.endTd,h.startTd)}this._fnFillerPosition(j.target)}this.s.screen.y=j.pageY;this.s.screen.scrollTop=g(a).scrollTop();if(this.s.dt.oScroll.sY!==""){this.s.scroller.scrollTop=g(this.s.dt.nTable.parentNode).scrollTop();this.s.scroller.top=g(this.s.dt.nTable.parentNode).offset().top;this.s.scroller.bottom=this.s.scroller.top+g(this.s.dt.nTable.parentNode).height()}},_fnFillerFinish:function(s){var p=this,n,k,m;g(a).unbind("mousemove.AutoFill mouseup.AutoFill");this.dom.borderTop.style.display="none";this.dom.borderRight.style.display="none";this.dom.borderBottom.style.display="none";this.dom.borderLeft.style.display="none";this.s.drag.dragging=false;clearInterval(this.s.screen.interval);var y=[];var x=this.dom.table;var q=this._fnTargetCoords(this.s.drag.startTd);var w=this._fnTargetCoords(this.s.drag.endTd);var r=function(i){return p.s.dt.oApi._fnVisibleToColumnIndex(p.s.dt,i)};if(q.y<=w.y){for(n=q.y;n<=w.y;n++){if(q.x<=w.x){for(m=q.x;m<=w.x;m++){y.push({node:g("tbody>tr:eq("+n+")>td:eq("+m+")",x)[0],x:m-q.x,y:n-q.y,colIdx:r(m)})}}else{for(m=q.x;m>=w.x;m--){y.push({node:g("tbody>tr:eq("+n+")>td:eq("+m+")",x)[0],x:m-q.x,y:n-q.y,colIdx:r(m)})}}}}else{for(n=q.y;n>=w.y;n--){if(q.x<=w.x){for(m=q.x;m<=w.x;m++){y.push({node:g("tbody>tr:eq("+n+")>td:eq("+m+")",x)[0],x:m-q.x,y:n-q.y,colIdx:r(m)})}}else{for(m=q.x;m>=w.x;m--){y.push({node:g("tbody>tr:eq("+n+")>td:eq("+m+")",x)[0],x:q.x-m,y:q.y-n,colIdx:r(m)})}}}}if(y.length<=1){return}var u=[];var o;for(n=0,k=y.length;n<k;n++){var v=y[n];var l=this.s.columns[v.colIdx];var h=l.read.call(l,v.node);var t=l.step.call(l,v.node,h,o,n,v.x,v.y);l.write.call(l,v.node,t);o=t;u.push({cell:v,colIdx:v.colIdx,newValue:t,oldValue:h})}if(this.c.complete!==null){this.c.complete.call(this,u)}if(f.Api){new f.Api(this.s.dt).draw(false)}else{this.s.dt.oInstance.fnDraw()}},_fnFillerDisplay:function(k){var j=this.dom.filler;if(this.s.drag.dragging){return}var i=(k.target.nodeName.toLowerCase()=="td")?k.target:g(k.target).parents("td")[0];var h=this._fnTargetCoords(i).column;if(!this.s.columns[h].enable){j.style.display="none";return}if(k.type=="mouseover"){this.dom.currentTarget=i;this._fnFillerPosition(i);j.style.display="block"}else{if(!k.relatedTarget||!k.relatedTarget.className.match(/AutoFill/)){j.style.display="none"}}},_fnFillerPosition:function(h){var j=g(h).offset();var i=this.dom.filler;i.style.top=(j.top-(this.s.filler.height/2)-1+g(h).outerHeight())+"px";i.style.left=(j.left-(this.s.filler.width/2)-1+g(h).outerWidth())+"px"}};f.AutoFill=e;f.AutoFill=e;e.version="1.2.1";e.defaults={mode:"y",complete:null,column:{enable:true,increment:true,read:function(h){return g(h).html()},write:function(h,k){var j=g(h).parents("table");if(f.Api){j.DataTable().cell(h).data(k)}else{var i=j.dataTable();var l=i.fnGetPosition(h);i.fnUpdate(k,l[0],l[2],false)}},step:function(j,o,n,l,h,p){var m=/(\-?\d+)/;var k=this.increment&&n?n.match(m):null;if(k){return n.replace(m,parseInt(k[1],10)+(h<0||p<0?-1:1))}return n===d?o:n}}};return e};if(typeof define==="function"&&define.amd){define(["jquery","datatables"],b)}else{if(typeof exports==="object"){b(require("jquery"),require("datatables"))}else{if(jQuery&&!jQuery.fn.dataTable.AutoFill){b(jQuery,jQuery.fn.dataTable)}}}}(window,document));