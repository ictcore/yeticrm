
/*!
 * FullCalendar v2.3.1
 * Docs & License: http://fullcalendar.io/
 * (c) 2015 Adam Shaw
 */
(function(a){if(typeof define==="function"&&define.amd){define(["jquery","moment"],a)}else{if(typeof exports==="object"){module.exports=a(require("jquery"),require("moment"))}else{a(jQuery,moment)}}})(function(aW,D){var be=aW.fullCalendar={version:"2.3.1"};var aJ=be.views={};aW.fn.fullCalendar=function(bq){var bp=Array.prototype.slice.call(arguments,1);var br=this;this.each(function(bu,bs){var bt=aW(bs);var bw=bt.data("fullCalendar");var bv;if(typeof bq==="string"){if(bw&&aW.isFunction(bw[bq])){bv=bw[bq].apply(bw,bp);if(!bu){br=bv}if(bq==="destroy"){bt.removeData("fullCalendar")}}}else{if(!bw){bw=new be.CalendarBase(bt,bq);bt.data("fullCalendar",bw);bw.render()}}});return br};var R=["header","buttonText","buttonIcons","themeButtonIcons"];function ba(){var bt=Array.prototype.slice.call(arguments);var bp={};var bs,br;var bu;var bq;var bv;for(bs=0;bs<R.length;bs++){br=R[bs];bu=null;for(bq=0;bq<bt.length;bq++){bv=bt[bq][br];if(aW.isPlainObject(bv)){bu=aW.extend(bu||{},bv)}else{if(bv!=null){bu=null}}}if(bu!==null){bp[br]=bu}}bt.unshift({});bt.push(bp);return aW.extend.apply(aW,bt)}function a2(bq){var br={views:bq.views||{}};var bp;aW.each(bq,function(bs,bt){if(bs!="views"){if(aW.isPlainObject(bt)&&!/(time|duration|interval)$/i.test(bs)&&aW.inArray(bs,R)==-1){bp=null;aW.each(bt,function(bv,bu){if(/^(month|week|day|default|basic(Week|Day)?|agenda(Week|Day)?)$/.test(bv)){if(!br.views[bv]){br.views[bv]={}}br.views[bv][bs]=bu}else{if(!bp){bp={}}bp[bv]=bu}});if(bp){br[bs]=bp}}else{br[bs]=bt}}});return br}be.intersectionToSeg=aU;be.applyAll=V;be.debounce=bo;be.isInt=Y;be.htmlEscape=bj;be.cssToStr=aB;be.proxy=y;function bc(bq,bp){if(bp.left){bq.css({"border-left-width":1,"margin-left":bp.left-1})}if(bp.right){bq.css({"border-right-width":1,"margin-right":bp.right-1})}}function at(bp){bp.css({"margin-left":"","margin-right":"","border-left-width":"","border-right-width":""})}function aC(){aW("body").addClass("fc-not-allowed")}function E(){aW("body").removeClass("fc-not-allowed")}function K(bu,bt,bq){var br=Math.floor(bt/bu.length);var bp=Math.floor(bt-br*(bu.length-1));var bv=[];var bw=[];var bs=[];var bx=0;d(bu);bu.each(function(bz,bA){var bB=bz===bu.length-1?bp:br;var by=aW(bA).outerHeight(true);if(by<bB){bv.push(bA);bw.push(by);bs.push(aW(bA).height())}else{bx+=by}});if(bq){bt-=bx;br=Math.floor(bt/bv.length);bp=Math.floor(bt-br*(bv.length-1))}aW(bv).each(function(bA,bB){var bD=bA===bv.length-1?bp:br;var bz=bw[bA];var bC=bs[bA];var by=bD-(bz-bC);if(bz<bD){aW(bB).height(by)}})}function d(bp){bp.height("")}function M(bp){var bq=0;bp.find("> *").each(function(bs,bt){var br=aW(bt).outerWidth();if(br>bq){bq=br}});bq++;bp.width(bq);return bq}function bd(bq,bp){bq.height(bp).addClass("fc-scroller");if(bq[0].scrollHeight-1>bq[0].clientHeight){return true}u(bq);return false}function u(bp){bp.height("").removeClass("fc-scroller")}be.getClientRect=p;be.getContentRect=aL;be.getScrollbarWidths=l;function az(bq){var bp=bq.css("position"),br=bq.parents().filter(function(){var bs=aW(this);return(/(auto|scroll)/).test(bs.css("overflow")+bs.css("overflow-y")+bs.css("overflow-x"))}).eq(0);return bp==="fixed"||!br.length?aW(bq[0].ownerDocument||document):br}function T(bp){var bq=bp.offset();return{left:bq.left,right:bq.left+bp.outerWidth(),top:bq.top,bottom:bq.top+bp.outerHeight()}}function p(bq){var bt=bq.offset();var bp=l(bq);var bs=bt.left+bb(bq,"border-left-width")+bp.left;var br=bt.top+bb(bq,"border-top-width")+bp.top;return{left:bs,right:bs+bq[0].clientWidth,top:br,bottom:br+bq[0].clientHeight}}function aL(bp){var bs=bp.offset();var br=bs.left+bb(bp,"border-left-width")+bb(bp,"padding-left");var bq=bs.top+bb(bp,"border-top-width")+bb(bp,"padding-top");return{left:br,right:br+bp.width(),top:bq,bottom:bq+bp.height()}}function l(bp){var br=bp.innerWidth()-bp[0].clientWidth;var bq={left:0,right:0,top:0,bottom:bp.innerHeight()-bp[0].clientHeight};if(aT()&&bp.css("direction")=="rtl"){bq.left=br}else{bq.right=br}return bq}var N=null;function aT(){if(N===null){N=c()}return N}function c(){var bq=aW("<div><div/></div>").css({position:"absolute",top:-1000,left:0,border:0,padding:0,overflow:"scroll",direction:"rtl"}).appendTo("body");var br=bq.children();var bp=br.offset().left>bq.offset().left;bq.remove();return bp}function bb(bp,bq){return parseFloat(bp.css(bq))||0}function ae(bp){return bp.which==1&&!bp.ctrlKey}function bm(bq,bp){var br={left:Math.max(bq.left,bp.left),right:Math.min(bq.right,bp.right),top:Math.max(bq.top,bp.top),bottom:Math.min(bq.bottom,bp.bottom)};if(br.left<br.right&&br.top<br.bottom){return br}return false}function aH(bp,bq){return{left:Math.min(Math.max(bp.left,bq.left),bq.right),top:Math.min(Math.max(bp.top,bq.top),bq.bottom)}}function X(bp){return{left:(bp.left+bp.right)/2,top:(bp.top+bp.bottom)/2}}function bi(bq,bp){return{left:bq.left-bp.left,top:bq.top-bp.top}}function aU(bx,bq){var bt=bx.start;var br=bx.end;var bw=bq.start;var bu=bq.end;var bv,by;var bp,bs;if(br>bw&&bt<bu){if(bt>=bw){bv=bt.clone();bp=true}else{bv=bw.clone();bp=false}if(br<=bu){by=br.clone();bs=true}else{by=bu.clone();bs=false}return{start:bv,end:by,isStart:bp,isEnd:bs}}}be.computeIntervalUnit=U;be.durationHasTime=aF;var aj=["sun","mon","tue","wed","thu","fri","sat"];var j=["year","month","week","day","hour","minute","second","millisecond"];function w(bq,bp){return D.duration({days:bq.clone().stripTime().diff(bp.clone().stripTime(),"days"),ms:bq.time()-bp.time()})}function ad(bq,bp){return D.duration({days:bq.clone().stripTime().diff(bp.clone().stripTime(),"days")})}function k(bq,bp,br){return D.duration(Math.round(bq.diff(bp,br,true)),br)}function U(bt,bp){var bq,br;var bs;for(bq=0;bq<j.length;bq++){br=j[bq];bs=o(br,bt,bp);if(bs>=1&&Y(bs)){break}}return br}function o(bq,br,bp){if(bp!=null){return bp.diff(br,bq,true)}else{if(D.isDuration(br)){return br.as(bq)}else{return br.end.diff(br.start,bq,true)}}}function aF(bp){return Boolean(bp.hours()||bp.minutes()||bp.seconds()||bp.milliseconds())}function O(bp){return Object.prototype.toString.call(bp)==="[object Date]"||bp instanceof Date}function P(bp){return/^\d+\:\d+(?:\:\d+\.?(?:\d{3})?)?$/.test(bp)}var x={}.hasOwnProperty;function ab(bp){var bq=function(){};bq.prototype=bp;return new bq()}function a8(br,bq){for(var bp in br){if(aS(br,bp)){bq[bp]=br[bp]}}}function ax(bt,bq){var bs=["constructor","toString","valueOf"];var br,bp;for(br=0;br<bs.length;br++){bp=bs[br];if(bt[bp]!==Object.prototype[bp]){bq[bp]=bt[bp]}}}function aS(bq,bp){return x.call(bq,bp)}function aN(bp){return/undefined|null|boolean|number|string/.test(aW.type(bp))}function V(bs,bt,bq){if(aW.isFunction(bs)){bs=[bs]}if(bs){var br;var bp;for(br=0;br<bs.length;br++){bp=bs[br].apply(bt,bq)||bp}return bp}}function bl(){for(var bp=0;bp<arguments.length;bp++){if(arguments[bp]!==undefined){return arguments[bp]}}}function bj(bp){return(bp+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function am(bp){return bp.replace(/&.*?;/g,"")}function aB(bq){var bp=[];aW.each(bq,function(br,bs){if(bs!=null){bp.push(br+":"+bs)}});return bp.join(";")}function a5(bp){return bp.charAt(0).toUpperCase()+bp.slice(1)}function aq(bq,bp){return bq-bp}function Y(bp){return bp%1===0}function y(bq,bp){var br=bq[bp];return function(){return br.apply(bq,arguments)}}function bo(bs,bu){var bv;var bq;var br;var bt;var bp=function(){var bw=+new Date()-bt;if(bw<bu&&bw>0){bv=setTimeout(bp,bu-bw)}else{bv=null;bs.apply(br,bq);if(!bv){br=bq=null}}};return function(){br=this;bq=arguments;bt=+new Date();if(!bv){bv=setTimeout(bp,bu)}}}var z=/^\s*\d{4}-\d\d$/;var ac=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?)?$/;var af=D.fn;var aR=aW.extend({},af);var aX;var g;var an;be.moment=function(){return A(arguments)};be.moment.utc=function(){var bp=A(arguments,true);if(bp.hasTime()){bp.utc()}return bp};be.moment.parseZone=function(){return A(arguments,true,true)};function A(bv,bu,bt){var bx=bv[0];var bs=bv.length==1&&typeof bx==="string";var br;var bw;var bp;var bq;if(D.isMoment(bx)){bq=D.apply(null,bv);t(bx,bq)}else{if(O(bx)||bx===undefined){bq=D.apply(null,bv)}else{br=false;bw=false;if(bs){if(z.test(bx)){bx+="-01";bv=[bx];br=true;bw=true}else{if((bp=ac.exec(bx))){br=!bp[5];bw=true}}}else{if(aW.isArray(bx)){bw=true}}if(bu||br){bq=D.utc.apply(D,bv)}else{bq=D.apply(null,bv)}if(br){bq._ambigTime=true;bq._ambigZone=true}else{if(bt){if(bw){bq._ambigZone=true}else{if(bs){if(bq.utcOffset){bq.utcOffset(bx)}else{bq.zone(bx)}}}}}}}bq._fullCalendar=true;return bq}af.clone=function(){var bp=aR.clone.apply(this,arguments);t(this,bp);if(this._fullCalendar){bp._fullCalendar=true}return bp};af.week=af.weeks=function(bq){var bp=(this._locale||this._lang)._fullCalendar_weekCalc;if(bq==null&&typeof bp==="function"){return bp(this)}else{if(bp==="ISO"){return aR.isoWeek.apply(this,arguments)}}return aR.week.apply(this,arguments)};af.time=function(bq){if(!this._fullCalendar){return aR.time.apply(this,arguments)}if(bq==null){return D.duration({hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()})}else{this._ambigTime=false;if(!D.isDuration(bq)&&!D.isMoment(bq)){bq=D.duration(bq)}var bp=0;if(D.isDuration(bq)){bp=Math.floor(bq.asDays())*24}return this.hours(bp+bq.hours()).minutes(bq.minutes()).seconds(bq.seconds()).milliseconds(bq.milliseconds())}};af.stripTime=function(){var bp;if(!this._ambigTime){bp=this.toArray();this.utc();g(this,bp.slice(0,3));this._ambigTime=true;this._ambigZone=true}return this};af.hasTime=function(){return !this._ambigTime};af.stripZone=function(){var bp,bq;if(!this._ambigZone){bp=this.toArray();bq=this._ambigTime;this.utc();g(this,bp);this._ambigTime=bq||false;this._ambigZone=true}return this};af.hasZone=function(){return !this._ambigZone};af.local=function(){var bp=this.toArray();var bq=this._ambigZone;aR.local.apply(this,arguments);this._ambigTime=false;this._ambigZone=false;if(bq){an(this,bp)}return this};af.utc=function(){aR.utc.apply(this,arguments);this._ambigTime=false;this._ambigZone=false;return this};aW.each(["zone","utcOffset"],function(bq,bp){if(aR[bp]){af[bp]=function(br){if(br!=null){this._ambigTime=false;this._ambigZone=false}return aR[bp].apply(this,arguments)}}});af.format=function(){if(this._fullCalendar&&arguments[0]){return I(this,arguments[0])}if(this._ambigTime){return f(this,"YYYY-MM-DD")}if(this._ambigZone){return f(this,"YYYY-MM-DD[T]HH:mm:ss")}return aR.format.apply(this,arguments)};af.toISOString=function(){if(this._ambigTime){return f(this,"YYYY-MM-DD")}if(this._ambigZone){return f(this,"YYYY-MM-DD[T]HH:mm:ss")}return aR.toISOString.apply(this,arguments)};af.isWithin=function(br,bq){var bp=aQ([this,br,bq]);return bp[0]>=bp[1]&&bp[0]<bp[2]};af.isSame=function(br,bq){var bp;if(!this._fullCalendar){return aR.isSame.apply(this,arguments)}if(bq){bp=aQ([this,br],true);return aR.isSame.call(bp[0],bp[1],bq)}else{br=be.moment.parseZone(br);return aR.isSame.call(this,br)&&Boolean(this._ambigTime)===Boolean(br._ambigTime)&&Boolean(this._ambigZone)===Boolean(br._ambigZone)}};aW.each(["isBefore","isAfter"],function(bq,bp){af[bp]=function(bt,bs){var br;if(!this._fullCalendar){return aR[bp].apply(this,arguments)}br=aQ([this,bt]);return aR[bp].call(br[0],br[1],bs)}});function aQ(bq,bw){var bs=false;var bv=false;var bp=bq.length;var br=[];var bt,bu;for(bt=0;bt<bp;bt++){bu=bq[bt];if(!D.isMoment(bu)){bu=be.moment.parseZone(bu)}bs=bs||bu._ambigTime;bv=bv||bu._ambigZone;br.push(bu)}for(bt=0;bt<bp;bt++){bu=br[bt];if(!bw&&bs&&!bu._ambigTime){br[bt]=bu.clone().stripTime()}else{if(bv&&!bu._ambigZone){br[bt]=bu.clone().stripZone()}}}return br}function t(bq,bp){if(bq._ambigTime){bp._ambigTime=true}else{if(bp._ambigTime){bp._ambigTime=false}}if(bq._ambigZone){bp._ambigZone=true}else{if(bp._ambigZone){bp._ambigZone=false}}}function bk(bq,bp){bq.year(bp[0]||0).month(bp[1]||0).date(bp[2]||0).hours(bp[3]||0).minutes(bp[4]||0).seconds(bp[5]||0).milliseconds(bp[6]||0)}aX="_d" in D()&&"updateOffset" in D;g=aX?function(bq,bp){bq._d.setTime(Date.UTC.apply(Date,bp));D.updateOffset(bq,false)}:bk;an=aX?function(bq,bp){bq._d.setTime(+new Date(bp[0]||0,bp[1]||0,bp[2]||0,bp[3]||0,bp[4]||0,bp[5]||0,bp[6]||0));D.updateOffset(bq,false)}:bk;function f(bq,bp){return aR.format.call(bq,bp)}function I(bq,bp){return bf(bq,v(bp))}function bf(bp,bs){var br="";var bq;for(bq=0;bq<bs.length;bq++){br+=ai(bp,bs[bq])}return br}var e={t:function(bp){return f(bp,"a").charAt(0)},T:function(bp){return f(bp,"A").charAt(0)}};function ai(bq,bp){var br;var bs;if(typeof bp==="string"){return bp}else{if((br=bp.token)){if(e[br]){return e[br](bq)}return f(bq,br)}else{if(bp.maybe){bs=bf(bq,bp.maybe);if(bs.match(/[1-9]/)){return bs}}}}return""}function W(bu,bs,bp,bt,bq){var br;bu=be.moment.parseZone(bu);bs=be.moment.parseZone(bs);br=(bu.localeData||bu.lang).call(bu);bp=br.longDateFormat(bp)||bp;bt=bt||" - ";return aI(bu,bs,v(bp),bt,bq)}be.formatRange=W;function aI(bC,bA,bu,bt,bq){var by;var bB;var bs="";var bp;var bw="";var bz;var bx="";var bv="";var br="";for(bB=0;bB<bu.length;bB++){by=aV(bC,bA,bu[bB]);if(by===false){break}bs+=by}for(bp=bu.length-1;bp>bB;bp--){by=aV(bC,bA,bu[bp]);if(by===false){break}bw=by+bw}for(bz=bB;bz<=bp;bz++){bx+=ai(bC,bu[bz]);bv+=ai(bA,bu[bz])}if(bx||bv){if(bq){br=bv+bt+bx}else{br=bx+bt+bv}}return bs+br+bw}var a9={Y:"year",M:"month",D:"day",d:"day",A:"second",a:"second",T:"second",t:"second",H:"second",h:"second",m:"second",s:"second"};function aV(bt,bs,bp){var bq;var br;if(typeof bp==="string"){return bp}else{if((bq=bp.token)){br=a9[bq.charAt(0)];if(br&&bt.isSame(bs,br)){return f(bt,bq)}}}return false}var bg={};function v(bp){if(bp in bg){return bg[bp]}return(bg[bp]=ay(bp))}function ay(bq){var bs=[];var bp=/\[([^\]]*)\]|\(([^\)]*)\)|(LTS|LT|(\w)\4*o?)|([^\w\[\(]+)/g;var br;while((br=bp.exec(bq))){if(br[1]){bs.push(br[1])}else{if(br[2]){bs.push({maybe:ay(br[2])})}else{if(br[3]){bs.push({token:br[3]})}else{if(br[5]){bs.push(br[5])}}}}}return bs}be.Class=a6;function a6(){}a6.extend=function(bp){var bq=this;var br;bp=bp||{};if(aS(bp,"constructor")){br=bp.constructor}if(typeof br!=="function"){br=bp.constructor=function(){bq.apply(this,arguments)}}br.prototype=ab(bq.prototype);a8(bp,br.prototype);ax(bp,br.prototype);a8(bq,br);return br};a6.mixin=function(bp){a8(bp.prototype||bp,this.prototype)};var n=a6.extend({isHidden:true,options:null,el:null,documentMousedownProxy:null,margin:10,constructor:function(bp){this.options=bp||{}},show:function(){if(this.isHidden){if(!this.el){this.render()}this.el.show();this.position();this.isHidden=false;this.trigger("show")}},hide:function(){if(!this.isHidden){this.el.hide();this.isHidden=true;this.trigger("hide")}},render:function(){var bq=this;var bp=this.options;this.el=aW('<div class="fc-popover"/>').addClass(bp.className||"").css({top:0,left:0}).append(bp.content).appendTo(bp.parentEl);this.el.on("click",".fc-close",function(){bq.hide()});if(bp.autoHide){aW(document).on("mousedown",this.documentMousedownProxy=y(this,"documentMousedown"))}},documentMousedown:function(bp){if(this.el&&!aW(bp.target).closest(this.el).length){this.hide()}},destroy:function(){this.hide();if(this.el){this.el.remove();this.el=null}aW(document).off("mousedown",this.documentMousedownProxy)},position:function(){var bz=this.options;var bv=this.el.offsetParent().offset();var bp=this.el.outerWidth();var bx=this.el.outerHeight();var bw=aW(window);var bu=az(this.el);var bq;var bs;var by;var bt;var br;bt=bz.top||0;if(bz.left!==undefined){br=bz.left}else{if(bz.right!==undefined){br=bz.right-bp}else{br=0}}if(bu.is(window)||bu.is(document)){bu=bw;bq=0;bs=0}else{by=bu.offset();bq=by.top;bs=by.left}bq+=bw.scrollTop();bs+=bw.scrollLeft();if(bz.viewportConstrain!==false){bt=Math.min(bt,bq+bu.outerHeight()-bx-this.margin);bt=Math.max(bt,bq+this.margin);br=Math.min(br,bs+bu.outerWidth()-bp-this.margin);br=Math.max(br,bs+this.margin)}this.el.css({top:bt-bv.top,left:br-bv.left})},trigger:function(bp){if(this.options[bp]){this.options[bp].apply(this,Array.prototype.slice.call(arguments,1))}}});var ao=a6.extend({grid:null,rowCoords:null,colCoords:null,containerEl:null,bounds:null,constructor:function(bp){this.grid=bp},build:function(){this.rowCoords=this.grid.computeRowCoords();this.colCoords=this.grid.computeColCoords();this.computeBounds()},clear:function(){this.rowCoords=null;this.colCoords=null},getCell:function(bw,bt){var bz=this.rowCoords;var br=bz.length;var bq=this.colCoords;var bx=bq.length;var bs=null;var bv=null;var bp,bu;var by;if(this.inBounds(bw,bt)){for(bp=0;bp<br;bp++){bu=bz[bp];if(bt>=bu.top&&bt<bu.bottom){bs=bp;break}}for(bp=0;bp<bx;bp++){bu=bq[bp];if(bw>=bu.left&&bw<bu.right){bv=bp;break}}if(bs!==null&&bv!==null){by=this.grid.getCell(bs,bv);by.grid=this.grid;aW.extend(by,bz[bs],bq[bv]);return by}}return null},computeBounds:function(){this.bounds=this.containerEl?p(this.containerEl):null},inBounds:function(bp,br){var bq=this.bounds;if(bq){return bp>=bq.left&&bp<bq.right&&br>=bq.top&&br<bq.bottom}return true}});var H=a6.extend({coordMaps:null,constructor:function(bp){this.coordMaps=bp},build:function(){var bq=this.coordMaps;var bp;for(bp=0;bp<bq.length;bp++){bq[bp].build()}},getCell:function(bq,bt){var bs=this.coordMaps;var bp=null;var br;for(br=0;br<bs.length&&!bp;br++){bp=bs[br].getCell(bq,bt)}return bp},clear:function(){var bq=this.coordMaps;var bp;for(bp=0;bp<bq.length;bp++){bq[bp].clear()}}});var a4=be.DragListener=a6.extend({options:null,isListening:false,isDragging:false,originX:null,originY:null,mousemoveProxy:null,mouseupProxy:null,subjectEl:null,subjectHref:null,scrollEl:null,scrollBounds:null,scrollTopVel:null,scrollLeftVel:null,scrollIntervalId:null,scrollHandlerProxy:null,scrollSensitivity:30,scrollSpeed:200,scrollIntervalMs:50,constructor:function(bp){bp=bp||{};this.options=bp;this.subjectEl=bp.subjectEl},mousedown:function(bp){if(ae(bp)){bp.preventDefault();this.startListening(bp);if(!this.options.distance){this.startDrag(bp)}}},startListening:function(bp){var bq;if(!this.isListening){if(bp&&this.options.scroll){bq=az(aW(bp.target));if(!bq.is(window)&&!bq.is(document)){this.scrollEl=bq;this.scrollHandlerProxy=bo(y(this,"scrollHandler"),100);this.scrollEl.on("scroll",this.scrollHandlerProxy)}}aW(document).on("mousemove",this.mousemoveProxy=y(this,"mousemove")).on("mouseup",this.mouseupProxy=y(this,"mouseup")).on("selectstart",this.preventDefault);if(bp){this.originX=bp.pageX;this.originY=bp.pageY}else{this.originX=0;this.originY=0}this.isListening=true;this.listenStart(bp)}},listenStart:function(bp){this.trigger("listenStart",bp)},mousemove:function(bs){var br=bs.pageX-this.originX;var bp=bs.pageY-this.originY;var bt;var bq;if(!this.isDragging){bt=this.options.distance||1;bq=br*br+bp*bp;if(bq>=bt*bt){this.startDrag(bs)}}if(this.isDragging){this.drag(br,bp,bs)}},startDrag:function(bp){if(!this.isListening){this.startListening()}if(!this.isDragging){this.isDragging=true;this.dragStart(bp)}},dragStart:function(bq){var bp=this.subjectEl;this.trigger("dragStart",bq);if((this.subjectHref=bp?bp.attr("href"):null)){bp.removeAttr("href")}},drag:function(bq,bp,br){this.trigger("drag",bq,bp,br);this.updateScroll(br)},mouseup:function(bp){this.stopListening(bp)},stopDrag:function(bp){if(this.isDragging){this.stopScrolling();this.dragStop(bp);this.isDragging=false}},dragStop:function(bp){var bq=this;this.trigger("dragStop",bp);setTimeout(function(){if(bq.subjectHref){bq.subjectEl.attr("href",bq.subjectHref)}},0)},stopListening:function(bp){this.stopDrag(bp);if(this.isListening){if(this.scrollEl){this.scrollEl.off("scroll",this.scrollHandlerProxy);this.scrollHandlerProxy=null}aW(document).off("mousemove",this.mousemoveProxy).off("mouseup",this.mouseupProxy).off("selectstart",this.preventDefault);this.mousemoveProxy=null;this.mouseupProxy=null;this.isListening=false;this.listenStop(bp)}},listenStop:function(bp){this.trigger("listenStop",bp)},trigger:function(bp){if(this.options[bp]){this.options[bp].apply(this,Array.prototype.slice.call(arguments,1))}},preventDefault:function(bp){bp.preventDefault()},computeScrollBounds:function(){var bp=this.scrollEl;this.scrollBounds=bp?T(bp):null},updateScroll:function(bv){var br=this.scrollSensitivity;var bp=this.scrollBounds;var bq,bs;var bw,bx;var bu=0;var bt=0;if(bp){bq=(br-(bv.pageY-bp.top))/br;bs=(br-(bp.bottom-bv.pageY))/br;bw=(br-(bv.pageX-bp.left))/br;bx=(br-(bp.right-bv.pageX))/br;if(bq>=0&&bq<=1){bu=bq*this.scrollSpeed*-1}else{if(bs>=0&&bs<=1){bu=bs*this.scrollSpeed}}if(bw>=0&&bw<=1){bt=bw*this.scrollSpeed*-1}else{if(bx>=0&&bx<=1){bt=bx*this.scrollSpeed}}}this.setScrollVel(bu,bt)},setScrollVel:function(bq,bp){this.scrollTopVel=bq;this.scrollLeftVel=bp;this.constrainScrollVel();if((this.scrollTopVel||this.scrollLeftVel)&&!this.scrollIntervalId){this.scrollIntervalId=setInterval(y(this,"scrollIntervalFunc"),this.scrollIntervalMs)}},constrainScrollVel:function(){var bp=this.scrollEl;if(this.scrollTopVel<0){if(bp.scrollTop()<=0){this.scrollTopVel=0}}else{if(this.scrollTopVel>0){if(bp.scrollTop()+bp[0].clientHeight>=bp[0].scrollHeight){this.scrollTopVel=0}}}if(this.scrollLeftVel<0){if(bp.scrollLeft()<=0){this.scrollLeftVel=0}}else{if(this.scrollLeftVel>0){if(bp.scrollLeft()+bp[0].clientWidth>=bp[0].scrollWidth){this.scrollLeftVel=0}}}},scrollIntervalFunc:function(){var bq=this.scrollEl;var bp=this.scrollIntervalMs/1000;if(this.scrollTopVel){bq.scrollTop(bq.scrollTop()+this.scrollTopVel*bp)}if(this.scrollLeftVel){bq.scrollLeft(bq.scrollLeft()+this.scrollLeftVel*bp)}this.constrainScrollVel();if(!this.scrollTopVel&&!this.scrollLeftVel){this.stopScrolling()}},stopScrolling:function(){if(this.scrollIntervalId){clearInterval(this.scrollIntervalId);this.scrollIntervalId=null;this.scrollStop()}},scrollHandler:function(){if(!this.scrollIntervalId){this.scrollStop()}},scrollStop:function(){}});var a0=a4.extend({coordMap:null,origCell:null,cell:null,coordAdjust:null,constructor:function(bq,bp){a4.prototype.constructor.call(this,bp);this.coordMap=bq},listenStart:function(bt){var bq=this.subjectEl;var br;var bs;var bp;a4.prototype.listenStart.apply(this,arguments);this.computeCoords();if(bt){bs={left:bt.pageX,top:bt.pageY};bp=bs;if(bq){br=T(bq);bp=aH(bp,br)}this.origCell=this.getCell(bp.left,bp.top);if(bq&&this.options.subjectCenter){if(this.origCell){br=bm(this.origCell,br)||br}bp=X(br)}this.coordAdjust=bi(bp,bs)}else{this.origCell=null;this.coordAdjust=null}},computeCoords:function(){this.coordMap.build();this.computeScrollBounds()},dragStart:function(bq){var bp;a4.prototype.dragStart.apply(this,arguments);bp=this.getCell(bq.pageX,bq.pageY);if(bp){this.cellOver(bp)}},drag:function(br,bq,bs){var bp;a4.prototype.drag.apply(this,arguments);bp=this.getCell(bs.pageX,bs.pageY);if(!L(bp,this.cell)){if(this.cell){this.cellOut()}if(bp){this.cellOver(bp)}}},dragStop:function(){this.cellDone();a4.prototype.dragStop.apply(this,arguments)},cellOver:function(bp){this.cell=bp;this.trigger("cellOver",bp,L(bp,this.origCell),this.origCell)},cellOut:function(){if(this.cell){this.trigger("cellOut",this.cell);this.cellDone();this.cell=null}},cellDone:function(){if(this.cell){this.trigger("cellDone",this.cell)}},listenStop:function(){a4.prototype.listenStop.apply(this,arguments);this.origCell=this.cell=null;this.coordMap.clear()},scrollStop:function(){a4.prototype.scrollStop.apply(this,arguments);this.computeCoords()},getCell:function(bq,bp){if(this.coordAdjust){bq+=this.coordAdjust.left;bp+=this.coordAdjust.top}return this.coordMap.getCell(bq,bp)}});function L(bq,bp){if(!bq&&!bp){return true}if(bq&&bp){return bq.grid===bp.grid&&bq.row===bp.row&&bq.col===bp.col}return false}var G=a6.extend({options:null,sourceEl:null,el:null,parentEl:null,top0:null,left0:null,mouseY0:null,mouseX0:null,topDelta:null,leftDelta:null,mousemoveProxy:null,isFollowing:false,isHidden:false,isAnimating:false,constructor:function(bp,bq){this.options=bq=bq||{};this.sourceEl=bp;this.parentEl=bq.parentEl?aW(bq.parentEl):bp.parent()},start:function(bp){if(!this.isFollowing){this.isFollowing=true;this.mouseY0=bp.pageY;this.mouseX0=bp.pageX;this.topDelta=0;this.leftDelta=0;if(!this.isHidden){this.updatePosition()}aW(document).on("mousemove",this.mousemoveProxy=y(this,"mousemove"))}},stop:function(bq,bt){var bs=this;var br=this.options.revertDuration;function bp(){this.isAnimating=false;bs.destroyEl();this.top0=this.left0=null;if(bt){bt()}}if(this.isFollowing&&!this.isAnimating){this.isFollowing=false;aW(document).off("mousemove",this.mousemoveProxy);if(bq&&br&&!this.isHidden){this.isAnimating=true;this.el.animate({top:this.top0,left:this.left0},{duration:br,complete:bp})}else{bp()}}},getEl:function(){var bp=this.el;if(!bp){this.sourceEl.width();bp=this.el=this.sourceEl.clone().css({position:"absolute",visibility:"",display:this.isHidden?"none":"",margin:0,right:"auto",bottom:"auto",width:this.sourceEl.width(),height:this.sourceEl.height(),opacity:this.options.opacity||"",zIndex:this.options.zIndex}).appendTo(this.parentEl)}return bp},destroyEl:function(){if(this.el){this.el.remove();this.el=null}},updatePosition:function(){var bq;var bp;this.getEl();if(this.top0===null){this.sourceEl.width();bq=this.sourceEl.offset();bp=this.el.offsetParent().offset();this.top0=bq.top-bp.top;this.left0=bq.left-bp.left}this.el.css({top:this.top0+this.topDelta,left:this.left0+this.leftDelta})},mousemove:function(bp){this.topDelta=bp.pageY-this.mouseY0;this.leftDelta=bp.pageX-this.mouseX0;if(!this.isHidden){this.updatePosition()}},hide:function(){if(!this.isHidden){this.isHidden=true;if(this.el){this.el.hide()}}},show:function(){if(this.isHidden){this.isHidden=false;this.updatePosition();this.getEl().show()}}});var ag=a6.extend({view:null,isRTL:null,cellHtml:"<td/>",constructor:function(bp){this.view=bp;this.isRTL=bp.opt("isRTL")},rowHtml:function(bt,bu){var bq=this.getHtmlRenderer("cell",bt);var bs="";var br;var bp;bu=bu||0;for(br=0;br<this.colCnt;br++){bp=this.getCell(bu,br);bs+=bq(bp)}bs=this.bookendCells(bs,bt,bu);return"<tr>"+bs+"</tr>"},bookendCells:function(br,bs,bu){var bt=this.getHtmlRenderer("intro",bs)(bu||0);var bp=this.getHtmlRenderer("outro",bs)(bu||0);var bv=this.isRTL?bp:bt;var bq=this.isRTL?bt:bp;if(typeof br==="string"){return bv+br+bq}else{return br.prepend(bv).append(bq)}},getHtmlRenderer:function(bq,br){var bp=this.view;var bv;var bs;var bu;var bt;bv=bq+"Html";if(br){bs=br+a5(bq)+"Html"}if(bs&&(bt=bp[bs])){bu=bp}else{if(bs&&(bt=this[bs])){bu=this}else{if((bt=bp[bv])){bu=bp}else{if((bt=this[bv])){bu=this}}}}if(typeof bt==="function"){return function(){return bt.apply(bu,arguments)||""}}return function(){return bt||""}}});var aM=be.Grid=ag.extend({start:null,end:null,rowCnt:0,colCnt:0,rowData:null,colData:null,el:null,coordMap:null,elsByFill:null,externalDragStartProxy:null,colHeadFormat:null,eventTimeFormat:null,displayEventTime:null,displayEventEnd:null,cellDuration:null,largeUnit:null,constructor:function(){ag.apply(this,arguments);this.coordMap=new ao(this);this.elsByFill={};this.externalDragStartProxy=y(this,"externalDragStart")},computeColHeadFormat:function(){},computeEventTimeFormat:function(){return this.view.opt("smallTimeFormat")},computeDisplayEventTime:function(){return true},computeDisplayEventEnd:function(){return true},setRange:function(br){var bq=this.view;var bp;var bs;this.start=br.start.clone();this.end=br.end.clone();this.rowData=[];this.colData=[];this.updateCells();this.colHeadFormat=bq.opt("columnFormat")||this.computeColHeadFormat();this.eventTimeFormat=bq.opt("eventTimeFormat")||bq.opt("timeFormat")||this.computeEventTimeFormat();bp=bq.opt("displayEventTime");if(bp==null){bp=this.computeDisplayEventTime()}bs=bq.opt("displayEventEnd");if(bs==null){bs=this.computeDisplayEventEnd()}this.displayEventTime=bp;this.displayEventEnd=bs},updateCells:function(){},rangeToSegs:function(bp){},diffDates:function(bq,bp){if(this.largeUnit){return k(bq,bp,this.largeUnit)}else{return w(bq,bp)}},getCell:function(br,bq){var bp;if(bq==null){if(typeof br==="number"){bq=br%this.colCnt;br=Math.floor(br/this.colCnt)}else{bq=br.col;br=br.row}}bp={row:br,col:bq};aW.extend(bp,this.getRowData(br),this.getColData(bq));aW.extend(bp,this.computeCellRange(bp));return bp},computeCellRange:function(bp){var bq=this.computeCellDate(bp);return{start:bq,end:bq.clone().add(this.cellDuration)}},computeCellDate:function(bp){},getRowData:function(bp){return this.rowData[bp]||{}},getColData:function(bp){return this.colData[bp]||{}},getRowEl:function(bp){},getColEl:function(bp){},getCellDayEl:function(bp){return this.getColEl(bp.col)||this.getRowEl(bp.row)},computeRowCoords:function(){var bp=[];var bq,br;var bs;for(bq=0;bq<this.rowCnt;bq++){br=this.getRowEl(bq);bs=br.offset().top;bp.push({top:bs,bottom:bs+br.outerHeight()})}return bp},computeColCoords:function(){var bp=[];var bq,br;var bs;for(bq=0;bq<this.colCnt;bq++){br=this.getColEl(bq);bs=br.offset().left;bp.push({left:bs,right:bs+br.outerWidth()})}return bp},setElement:function(bp){var bq=this;this.el=bp;bp.on("mousedown",function(br){if(!aW(br.target).is(".fc-event-container *, .fc-more")&&!aW(br.target).closest(".fc-popover").length){bq.dayMousedown(br)}});this.bindSegHandlers();this.bindGlobalHandlers()},removeElement:function(){this.unbindGlobalHandlers();this.el.remove()},renderSkeleton:function(){},renderDates:function(){},destroyDates:function(){},bindGlobalHandlers:function(){aW(document).on("dragstart sortstart",this.externalDragStartProxy)},unbindGlobalHandlers:function(){aW(document).off("dragstart sortstart",this.externalDragStartProxy)},dayMousedown:function(bt){var bv=this;var br=this.view;var bp=br.opt("selectable");var bq;var bu;var bs=new a0(this.coordMap,{scroll:br.opt("dragScroll"),dragStart:function(){br.unselect()},cellOver:function(by,bx,bw){if(bw){bq=bx?by:null;if(bp){bu=bv.computeSelection(bw,by);if(bu){bv.renderSelection(bu)}else{aC()}}}},cellOut:function(bw){bq=null;bu=null;bv.destroySelection();E()},listenStop:function(bw){if(bq){br.trigger("dayClick",bv.getCellDayEl(bq),bq.start,bw)}if(bu){br.reportSelection(bu,bw)}E()}});bs.mousedown(bt)},renderRangeHelper:function(bq,bp){var br=this.fabricateHelperEvent(bq,bp);this.renderHelper(br,bp)},fabricateHelperEvent:function(bq,bp){var br=bp?ab(bp.event):{};br.start=bq.start.clone();br.end=bq.end?bq.end.clone():null;br.allDay=null;this.view.calendar.normalizeEventRange(br);br.className=(br.className||[]).concat("fc-helper");if(!bp){br.editable=false}return br},renderHelper:function(bq,bp){},destroyHelper:function(){},renderSelection:function(bp){this.renderHighlight(bp)},destroySelection:function(){this.destroyHighlight()},computeSelection:function(br,bp){var bs=[br.start,br.end,bp.start,bp.end];var bq;bs.sort(aq);bq={start:bs[0].clone(),end:bs[3].clone()};if(!this.view.calendar.isSelectionRangeAllowed(bq)){return null}return bq},renderHighlight:function(bp){this.renderFill("highlight",this.rangeToSegs(bp))},destroyHighlight:function(){this.destroyFill("highlight")},highlightSegClasses:function(){return["fc-highlight"]},renderFill:function(bq,bp){},destroyFill:function(bq){var bp=this.elsByFill[bq];if(bp){bp.remove();delete this.elsByFill[bq]}},renderFillSegEls:function(bu,bq){var bv=this;var bp=this[bu+"SegEl"];var bt="";var bs=[];var br;if(bq.length){for(br=0;br<bq.length;br++){bt+=this.fillSegHtml(bu,bq[br])}aW(bt).each(function(bx,bz){var bw=bq[bx];var by=aW(bz);if(bp){by=bp.call(bv,bw,by)}if(by){by=aW(by);if(by.is(bv.fillSegTag)){bw.el=by;bs.push(bw)}}})}return bs},fillSegTag:"div",fillSegHtml:function(bt,bp){var bu=this[bt+"SegClasses"];var bq=this[bt+"SegCss"];var bs=bu?bu.call(this,bp):[];var br=aB(bq?bq.call(this,bp):{});return"<"+this.fillSegTag+(bs.length?' class="'+bs.join(" ")+'"':"")+(br?' style="'+br+'"':"")+" />"},headHtml:function(){return'<div class="fc-row "><table><thead>'+this.rowHtml("head")+"</thead></table></div>"},headCellHtml:function(bp){var bq=this.view;var br=bp.start;return'<th class="fc-day-header '+bq.widgetHeaderClass+" fc-"+aj[br.day()]+'">'+bj(br.format(this.colHeadFormat))+"</th>"},bgCellHtml:function(bp){var bq=this.view;var br=bp.start;var bs=this.getDayClasses(br);bs.unshift("fc-day",bq.widgetContentClass);return'<td class="'+bs.join(" ")+'" data-date="'+br.format("YYYY-MM-DD")+'"></td>'},getDayClasses:function(br){var bp=this.view;var bq=bp.calendar.getNow().stripTime();var bs=["fc-"+aj[br.day()]];if(bp.intervalDuration.as("months")==1&&br.month()!=bp.intervalStart.month()){bs.push("fc-other-month")}if(br.isSame(bq,"day")){bs.push("fc-today",bp.highlightStateClass)}else{if(br<bq){bs.push("fc-past")}else{bs.push("fc-future")}}return bs}});aM.mixin({mousedOverSeg:null,isDraggingSeg:false,isResizingSeg:false,isDraggingExternal:false,segs:null,renderEvents:function(bt){var bq=this.eventsToSegs(bt);var br=[];var bu=[];var bs,bp;for(bs=0;bs<bq.length;bs++){bp=bq[bs];if(aA(bp.event)){br.push(bp)}else{bu.push(bp)}}br=this.renderBgSegs(br)||br;bu=this.renderFgSegs(bu)||bu;this.segs=br.concat(bu)},destroyEvents:function(){this.triggerSegMouseout();this.destroyFgSegs();this.destroyBgSegs();this.segs=null},getEventSegs:function(){return this.segs||[]},renderFgSegs:function(bp){},destroyFgSegs:function(){},renderFgSegEls:function(br,bq){var bp=this.view;var bu="";var bt=[];var bs;if(br.length){for(bs=0;bs<br.length;bs++){bu+=this.fgSegHtml(br[bs],bq)}aW(bu).each(function(bw,by){var bv=br[bw];var bx=bp.resolveEventEl(bv.event,aW(by));if(bx){bx.data("fc-seg",bv);bv.el=bx;bt.push(bv)}})}return bt},fgSegHtml:function(bq,bp){},renderBgSegs:function(bp){return this.renderFill("bgEvent",bp)},destroyBgSegs:function(){this.destroyFill("bgEvent")},bgEventSegEl:function(bp,bq){return this.view.resolveEventEl(bp.event,bq)},bgEventSegClasses:function(bp){var bq=bp.event;var br=bq.source||{};return["fc-bgevent"].concat(bq.className,br.className||[])},bgEventSegCss:function(bq){var bp=this.view;var br=bq.event;var bs=br.source||{};return{"background-color":br.backgroundColor||br.color||bs.backgroundColor||bs.color||bp.opt("eventBackgroundColor")||bp.opt("eventColor")}},businessHoursSegClasses:function(bp){return["fc-nonbusiness","fc-bgevent"]},bindSegHandlers:function(){var bq=this;var bp=this.view;aW.each({mouseenter:function(br,bs){bq.triggerSegMouseover(br,bs)},mouseleave:function(br,bs){bq.triggerSegMouseout(br,bs)},click:function(br,bs){return bp.trigger("eventClick",this,br.event,bs)},mousedown:function(br,bs){if(aW(bs.target).is(".fc-resizer")&&bp.isEventResizable(br.event)){bq.segResizeMousedown(br,bs,aW(bs.target).is(".fc-start-resizer"))}else{if(bp.isEventDraggable(br.event)){bq.segDragMousedown(br,bs)}}}},function(br,bs){bq.el.on(br,".fc-event-container > *",function(bu){var bt=aW(this).data("fc-seg");if(bt&&!bq.isDraggingSeg&&!bq.isResizingSeg){return bs.call(this,bt,bu)}})})},triggerSegMouseover:function(bp,bq){if(!this.mousedOverSeg){this.mousedOverSeg=bp;this.view.trigger("eventMouseover",bp.el[0],bp.event,bq)}},triggerSegMouseout:function(bp,bq){bq=bq||{};if(this.mousedOverSeg){bp=bp||this.mousedOverSeg;this.mousedOverSeg=null;this.view.trigger("eventMouseout",bp.el[0],bp.event,bq)}},segDragMousedown:function(bt,bx){var bw=this;var by=this.view;var bu=by.calendar;var bs=bt.el;var br=bt.event;var bv;var bq=new G(bt.el,{parentEl:by.el,opacity:by.opt("dragOpacity"),revertDuration:by.opt("dragRevertDuration"),zIndex:2});var bp=new a0(by.coordMap,{distance:5,scroll:by.opt("dragScroll"),subjectEl:bs,subjectCenter:true,listenStart:function(bz){bq.hide();bq.start(bz)},dragStart:function(bz){bw.triggerSegMouseout(bt,bz);bw.segDragStart(bt,bz);by.hideEvent(br)},cellOver:function(bB,bA,bz){if(bt.cell){bz=bt.cell}bv=bw.computeEventDrop(bz,bB,br);if(bv&&!bu.isEventRangeAllowed(bv,br)){aC();bv=null}if(bv&&by.renderDrag(bv,bt)){bq.hide()}else{bq.show()}if(bA){bv=null}},cellOut:function(){by.destroyDrag();bq.show();bv=null},cellDone:function(){E()},dragStop:function(bz){bq.stop(!bv,function(){by.destroyDrag();by.showEvent(br);bw.segDragStop(bt,bz);if(bv){by.reportEventDrop(br,bv,this.largeUnit,bs,bz)}})},listenStop:function(){bq.stop()}});bp.mousedown(bx)},segDragStart:function(bp,bq){this.isDraggingSeg=true;this.view.trigger("eventDragStart",bp.el[0],bp.event,bq,{})},segDragStop:function(bp,bq){this.isDraggingSeg=false;this.view.trigger("eventDragStop",bp.el[0],bp.event,bq,{})},computeEventDrop:function(bv,br,bt){var bu=this.view.calendar;var bq=bv.start;var bp=br.start;var bw;var bs;if(bq.hasTime()===bp.hasTime()){bw=this.diffDates(bp,bq);if(bt.allDay&&aF(bw)){bs={start:bt.start.clone(),end:bu.getEventEnd(bt),allDay:false};bu.normalizeEventRangeTimes(bs)}else{bs={start:bt.start.clone(),end:bt.end?bt.end.clone():null,allDay:bt.allDay}}bs.start.add(bw);if(bs.end){bs.end.add(bw)}}else{bs={start:bp.clone(),end:null,allDay:!bp.hasTime()}}return bs},applyDragOpacity:function(bq){var bp=this.view.opt("dragOpacity");if(bp!=null){bq.each(function(br,bs){bs.style.opacity=bp})}},externalDragStart:function(bs,bt){var bp=this.view;var br;var bq;if(bp.opt("droppable")){br=aW((bt?bt.item:null)||bs.target);bq=bp.opt("dropAccept");if(aW.isFunction(bq)?bq.call(br[0],br):br.is(bq)){if(!this.isDraggingExternal){this.listenToExternalDrag(br,bs,bt)}}}},listenToExternalDrag:function(bq,bs,bt){var bv=this;var bu=ap(bq);var bp;var br;bp=new a0(this.coordMap,{listenStart:function(){bv.isDraggingExternal=true},cellOver:function(bw){br=bv.computeExternalDrop(bw,bu);if(br){bv.renderDrag(br)}else{aC()}},cellOut:function(){br=null;bv.destroyDrag();E()},dragStop:function(){bv.destroyDrag();E();if(br){bv.view.reportExternalDrop(bu,br,bq,bs,bt)}},listenStop:function(){bv.isDraggingExternal=false}});bp.startDrag(bs)},computeExternalDrop:function(bp,br){var bq={start:bp.start.clone(),end:null};if(br.startTime&&!bq.start.hasTime()){bq.start.time(br.startTime)}if(br.duration){bq.end=bq.start.clone().add(br.duration)}if(!this.view.calendar.isExternalDropRangeAllowed(bq,br.eventProps)){return null}return bq},renderDrag:function(bq,bp){},destroyDrag:function(){},segResizeMousedown:function(bt,bx,bq){var bw=this;var by=this.view;var bu=by.calendar;var bs=bt.el;var br=bt.event;var bv=bu.getEventEnd(br);var bp;var bz;bp=new a0(this.coordMap,{distance:5,scroll:by.opt("dragScroll"),subjectEl:bs,dragStart:function(bA){bw.triggerSegMouseout(bt,bA);bw.segResizeStart(bt,bA)},cellOver:function(bC,bB,bA){bz=bq?bw.computeEventStartResize(bA,bC,br):bw.computeEventEndResize(bA,bC,br);if(bz){if(!bu.isEventRangeAllowed(bz,br)){aC();bz=null}else{if(bz.start.isSame(br.start)&&bz.end.isSame(bv)){bz=null}}}if(bz){by.hideEvent(br);bw.renderEventResize(bz,bt)}},cellOut:function(){bz=null},cellDone:function(){bw.destroyEventResize();by.showEvent(br);E()},dragStop:function(bA){bw.segResizeStop(bt,bA);if(bz){by.reportEventResize(br,bz,this.largeUnit,bs,bA)}}});bp.mousedown(bx)},segResizeStart:function(bp,bq){this.isResizingSeg=true;this.view.trigger("eventResizeStart",bp.el[0],bp.event,bq,{})},segResizeStop:function(bp,bq){this.isResizingSeg=false;this.view.trigger("eventResizeStop",bp.el[0],bp.event,bq,{})},computeEventStartResize:function(br,bp,bq){return this.computeEventResize("start",br,bp,bq)},computeEventEndResize:function(br,bp,bq){return this.computeEventResize("end",br,bp,bq)},computeEventResize:function(br,bv,bq,bs){var bu=this.view.calendar;var bw=this.diffDates(bq[br],bv[br]);var bp;var bt;bp={start:bs.start.clone(),end:bu.getEventEnd(bs),allDay:bs.allDay};if(bp.allDay&&aF(bw)){bp.allDay=false;bu.normalizeEventRangeTimes(bp)}bp[br].add(bw);if(!bp.start.isBefore(bp.end)){bt=bs.allDay?bu.defaultAllDayEventDuration:bu.defaultTimedEventDuration;if(this.cellDuration&&this.cellDuration<bt){bt=this.cellDuration}if(br=="start"){bp.start=bp.end.clone().subtract(bt)}else{bp.end=bp.start.clone().add(bt)}}return bp},renderEventResize:function(bq,bp){},destroyEventResize:function(){},getEventTimeText:function(bq,bp,br){if(bp==null){bp=this.eventTimeFormat}if(br==null){br=this.displayEventEnd}if(this.displayEventTime&&bq.start.hasTime()){if(br&&bq.end){return this.view.formatRange(bq,bp)}else{return bq.start.format(bp)}}return""},getSegClasses:function(bp,br,bt){var bs=bp.event;var bq=["fc-event",bp.isStart?"fc-start":"fc-not-start",bp.isEnd?"fc-end":"fc-not-end"].concat(bs.className,bs.source?bs.source.className:[]);if(br){bq.push("fc-draggable")}if(bt){bq.push("fc-resizable")}return bq},getEventSkinCss:function(bs){var bp=this.view;var bt=bs.source||{};var bq=bs.color;var bu=bt.color;var br=bp.opt("eventColor");return{"background-color":bs.backgroundColor||bq||bt.backgroundColor||bu||bp.opt("eventBackgroundColor")||br,"border-color":bs.borderColor||bq||bt.borderColor||bu||bp.opt("eventBorderColor")||br,color:bs.textColor||bt.textColor||bp.opt("eventTextColor")}},eventsToSegs:function(bt,br){var bq=this.eventsToRanges(bt);var bp=[];var bs;for(bs=0;bs<bq.length;bs++){bp.push.apply(bp,this.eventRangeToSegs(bq[bs],br))}return bp},eventsToRanges:function(bq){var bs=this;var br=aP(bq);var bp=[];aW.each(br,function(bu,bt){if(bt.length){bp.push.apply(bp,b(bt[0])?bs.eventsToInverseRanges(bt):bs.eventsToNormalRanges(bt))}});return bp},eventsToNormalRanges:function(bt){var bv=this.view.calendar;var br=[];var bs,bu;var bq,bp;for(bs=0;bs<bt.length;bs++){bu=bt[bs];bq=bu.start.clone().stripZone();bp=bv.getEventEnd(bu).stripZone();br.push({event:bu,start:bq,end:bp,eventStartMS:+bq,eventDurationMS:bp-bq})}return br},eventsToInverseRanges:function(by){var bu=this.view;var bt=bu.start.clone().stripZone();var bx=bu.end.clone().stripZone();var bv=this.eventsToNormalRanges(by);var bq=[];var bw=by[0];var bp=bt;var br,bs;bv.sort(aZ);for(br=0;br<bv.length;br++){bs=bv[br];if(bs.start>bp){bq.push({event:bw,start:bp,end:bs.start})}bp=bs.end}if(bp<bx){bq.push({event:bw,start:bp,end:bx})}return bq},eventRangeToSegs:function(bt,br){var bq;var bs,bp;if(br){bq=br(bt)}else{bq=this.rangeToSegs(bt)}for(bs=0;bs<bq.length;bs++){bp=bq[bs];bp.event=bt.event;bp.eventStartMS=bt.eventStartMS;bp.eventDurationMS=bt.eventDurationMS}return bq}});function aA(bq){var bp=aw(bq);return bp==="background"||bp==="inverse-background"}function b(bp){return aw(bp)==="inverse-background"}function aw(bp){return bl((bp.source||{}).rendering,bp.rendering)}function aP(bq){var br={};var bp,bs;for(bp=0;bp<bq.length;bp++){bs=bq[bp];(br[bs._id]||(br[bs._id]=[])).push(bs)}return br}function aZ(bq,bp){return bq.eventStartMS-bp.eventStartMS}function C(bq,bp){return bq.eventStartMS-bp.eventStartMS||bp.eventDurationMS-bq.eventDurationMS||bp.event.allDay-bq.event.allDay||(bq.event.title||"").localeCompare(bp.event.title)}be.compareSegs=C;be.dataAttrPrefix="";function ap(br){var bt=be.dataAttrPrefix;var bs;var bq;var bu;var bp;if(bt){bt+="-"}bs=br.data(bt+"event")||null;if(bs){if(typeof bs==="object"){bs=aW.extend({},bs)}else{bs={}}bq=bs.start;if(bq==null){bq=bs.time}bu=bs.duration;bp=bs.stick;delete bs.start;delete bs.time;delete bs.duration;delete bs.stick}if(bq==null){bq=br.data(bt+"start")}if(bq==null){bq=br.data(bt+"time")}if(bu==null){bu=br.data(bt+"duration")}if(bp==null){bp=br.data(bt+"stick")}bq=bq!=null?D.duration(bq):null;bu=bu!=null?D.duration(bu):null;bp=Boolean(bp);return{eventProps:bs,startTime:bq,duration:bu,stick:bp}}var a7=aM.extend({numbersVisible:false,bottomCoordPadding:0,breakOnWeeks:null,cellDates:null,dayToCellOffsets:null,rowEls:null,dayEls:null,helperEls:null,constructor:function(){aM.apply(this,arguments);this.cellDuration=D.duration(1,"day")},renderDates:function(bp){var bu=this.view;var bt=this.rowCnt;var bv=this.colCnt;var bq=bt*bv;var bs="";var bx;var br,bw;for(bx=0;bx<bt;bx++){bs+=this.dayRowHtml(bx,bp)}this.el.html(bs);this.rowEls=this.el.find(".fc-row");this.dayEls=this.el.find(".fc-day");for(br=0;br<bq;br++){bw=this.getCell(br);bu.trigger("dayRender",null,bw.start,this.dayEls.eq(br))}},destroyDates:function(){this.destroySegPopover()},renderBusinessHours:function(){var bq=this.view.calendar.getBusinessHoursEvents(true);var bp=this.eventsToSegs(bq);this.renderFill("businessHours",bp,"bgevent")},dayRowHtml:function(bs,bq){var bp=this.view;var br=["fc-row","fc-week",bp.widgetContentClass];if(bq){br.push("fc-rigid")}return'<div class="'+br.join(" ")+'"><div class="fc-bg"><table>'+this.rowHtml("day",bs)+'</table></div><div class="fc-content-skeleton"><table>'+(this.numbersVisible?"<thead>"+this.rowHtml("number",bs)+"</thead>":"")+"</table></div></div>"},dayCellHtml:function(bp){return this.bgCellHtml(bp)},computeColHeadFormat:function(){if(this.rowCnt>1){return"ddd"}else{if(this.colCnt>1){return this.view.opt("dayOfMonthFormat")}else{return"dddd"}}},computeEventTimeFormat:function(){return this.view.opt("extraSmallTimeFormat")},computeDisplayEventEnd:function(){return this.colCnt==1},updateCells:function(){var br;var bp;var bs;var bq;this.updateCellDates();br=this.cellDates;if(this.breakOnWeeks){bp=br[0].day();for(bq=1;bq<br.length;bq++){if(br[bq].day()==bp){break}}bs=Math.ceil(br.length/bq)}else{bs=1;bq=br.length}this.rowCnt=bs;this.colCnt=bq},updateCellDates:function(){var bp=this.view;var bq=this.start.clone();var bs=[];var bt=-1;var br=[];while(bq.isBefore(this.end)){if(bp.isHiddenDay(bq)){br.push(bt+0.5)}else{bt++;br.push(bt);bs.push(bq.clone())}bq.add(1,"days")}this.cellDates=bs;this.dayToCellOffsets=br},computeCellDate:function(bp){var br=this.colCnt;var bq=bp.row*br+(this.isRTL?br-bp.col-1:bp.col);return this.cellDates[bq].clone()},getRowEl:function(bp){return this.rowEls.eq(bp)},getColEl:function(bp){return this.dayEls.eq(bp)},getCellDayEl:function(bp){return this.dayEls.eq(bp.row*this.colCnt+bp.col)},computeRowCoords:function(){var bp=aM.prototype.computeRowCoords.call(this);bp[bp.length-1].bottom+=this.bottomCoordPadding;return bp},rangeToSegs:function(bv){var br=this.isRTL;var bx=this.rowCnt;var bA=this.colCnt;var bq=[];var bu,bB;var bD;var by,bz;var bp,bs;var bC,bw;var bt;bv=this.view.computeDayRange(bv);bu=this.dateToCellOffset(bv.start);bB=this.dateToCellOffset(bv.end.subtract(1,"days"));for(bD=0;bD<bx;bD++){by=bD*bA;bz=by+bA-1;bC=Math.max(by,bu);bw=Math.min(bz,bB);bC=Math.ceil(bC);bw=Math.floor(bw);if(bC<=bw){bp=bC===bu;bs=bw===bB;bC-=by;bw-=by;bt={row:bD,isStart:bp,isEnd:bs};if(br){bt.leftCol=bA-bw-1;bt.rightCol=bA-bC-1}else{bt.leftCol=bC;bt.rightCol=bw}bq.push(bt)}}return bq},dateToCellOffset:function(bq){var br=this.dayToCellOffsets;var bp=bq.diff(this.start,"days");if(bp<0){return br[0]-1}else{if(bp>=br.length){return br[br.length-1]+1}else{return br[bp]}}},renderDrag:function(bq,bp){this.renderHighlight(this.view.calendar.ensureVisibleEventRange(bq));if(bp&&!bp.el.closest(this.el).length){this.renderRangeHelper(bq,bp);this.applyDragOpacity(this.helperEls);return true}},destroyDrag:function(){this.destroyHighlight();this.destroyHelper()},renderEventResize:function(bq,bp){this.renderHighlight(bq);this.renderRangeHelper(bq,bp)},destroyEventResize:function(){this.destroyHighlight();this.destroyHelper()},renderHelper:function(bt,br){var bp=[];var bq=this.eventsToSegs([bt]);var bs;bq=this.renderFgSegEls(bq);bs=this.renderSegRows(bq);this.rowEls.each(function(by,bw){var bv=aW(bw);var bx=aW('<div class="fc-helper-skeleton"><table/></div>');var bu;if(br&&br.row===by){bu=br.el.position().top}else{bu=bv.find(".fc-content-skeleton tbody").position().top}bx.css("top",bu).find("table").append(bs[by].tbodyEl);bv.append(bx);bp.push(bx[0])});this.helperEls=aW(bp)},destroyHelper:function(){if(this.helperEls){this.helperEls.remove();this.helperEls=null}},fillSegTag:"td",renderFill:function(bu,bq,bt){var br=[];var bs,bp;var bv;bq=this.renderFillSegEls(bu,bq);for(bs=0;bs<bq.length;bs++){bp=bq[bs];bv=this.renderFillRow(bu,bp,bt);this.rowEls.eq(bp.row).append(bv);br.push(bv[0])}this.elsByFill[bu]=aW(br);return bq},renderFillRow:function(bs,bp,br){var bq=this.colCnt;var bv=bp.leftCol;var bu=bp.rightCol+1;var bw;var bt;br=br||bs.toLowerCase();bw=aW('<div class="fc-'+br+'-skeleton"><table><tr/></table></div>');bt=bw.find("tr");if(bv>0){bt.append('<td colspan="'+bv+'"/>')}bt.append(bp.el.attr("colspan",bu-bv));if(bu<bq){bt.append('<td colspan="'+(bq-bu)+'"/>')}this.bookendCells(bt,bs);return bw}});a7.mixin({rowStructs:null,destroyEvents:function(){this.destroySegPopover();aM.prototype.destroyEvents.apply(this,arguments)},getEventSegs:function(){return aM.prototype.getEventSegs.call(this).concat(this.popoverSegs||[])},renderBgSegs:function(bp){var bq=aW.grep(bp,function(br){return br.event.allDay});return aM.prototype.renderBgSegs.call(this,bq)},renderFgSegs:function(bp){var bq;bp=this.renderFgSegEls(bp);bq=this.rowStructs=this.renderSegRows(bp);this.rowEls.each(function(br,bs){aW(bs).find(".fc-content-skeleton > table").append(bq[br].tbodyEl)});return bp},destroyFgSegs:function(){var bq=this.rowStructs||[];var bp;while((bp=bq.pop())){bp.tbodyEl.remove()}this.rowStructs=null},renderSegRows:function(bq){var br=[];var bp;var bs;bp=this.groupSegRows(bq);for(bs=0;bs<bp.length;bs++){br.push(this.renderSegRow(bs,bp[bs]))}return br},fgSegHtml:function(bw,br){var bB=this.view;var bq=bw.event;var bp=bB.isEventDraggable(bq);var bu=!br&&bq.allDay&&bw.isStart&&bB.isEventResizableFromStart(bq);var bt=!br&&bq.allDay&&bw.isEnd&&bB.isEventResizableFromEnd(bq);var bv=this.getSegClasses(bw,bp,bu||bt);var bC=aB(this.getEventSkinCss(bq));var bA="";var bs;var bz;bv.unshift("fc-day-grid-event","fc-h-event");if(bq.type=="widget"){var by="";by='<div class="cell-calendar">';for(var bx in bq.event){by+='<a class="" href="javascript:;" data-date="'+bq.date+'" data-type="'+bx+'" title="'+bq.event[bx].label+'"><span class="'+bq.event[bx].className+((bq.width<=20)?" small-badge":"")+((bq.width>=24)?" big-badge":"")+' badge">'+bq.event[bx].count+"</span></a>\n"}by+="</div>";return by}if(bq.start.format("HHH")!="000"){bs=this.getEventTimeText(bq,null,false);if(bs){bA='<span class="fc-time">'+bj(bs)+"</span>"}}bz='<span class="fc-title">'+bq.title+"</span>";return'<div data-id="'+bq.id+'" data-module="'+bq.module+'" class="'+bv.join(" ")+'"'+(bq.url?' href="'+bj(bq.url)+'"':"")+(bC?' style="'+bC+'"':"")+'><div class="pull-left"><span class="glyphicon glyphicon-option-vertical" aria-hidden="true"></span></div><div class="pull-right fc-info"><span class="glyphicon glyphicon-ok" aria-hidden="true"></span></div><div class="fc-content">'+bA+""+bz+"</div>"+(bu?'<div class="fc-resizer fc-start-resizer" />':"")+(bt?'<div class="fc-resizer fc-end-resizer" />':"")+"</div>"},renderSegRow:function(bE,bF){var bC=this.colCnt;var by=this.buildSegLevels(bF);var bp=Math.max(1,by.length);var bx=aW("<tbody/>");var bt=[];var bz=[];var br=[];var bw,bB;var bq;var bA;var bv,bu;var bs;function bD(bG){while(bq<bG){bs=(br[bw-1]||[])[bq];if(bs){bs.attr("rowspan",parseInt(bs.attr("rowspan")||1,10)+1)}else{bs=aW("<td/>");bA.append(bs)}bz[bw][bq]=bs;br[bw][bq]=bs;bq++}}for(bw=0;bw<bp;bw++){bB=by[bw];bq=0;bA=aW("<tr/>");bt.push([]);bz.push([]);br.push([]);if(bB){for(bv=0;bv<bB.length;bv++){bu=bB[bv];bD(bu.leftCol);bs=aW('<td class="fc-event-container"/>').append(bu.el);if(bu.leftCol!=bu.rightCol){bs.attr("colspan",bu.rightCol-bu.leftCol+1)}else{br[bw][bq]=bs}while(bq<=bu.rightCol){bz[bw][bq]=bs;bt[bw][bq]=bu;bq++}bA.append(bs)}}bD(bC);this.bookendCells(bA,"eventSkeleton");bx.append(bA)}return{row:bE,tbodyEl:bx,cellMatrix:bz,segMatrix:bt,segLevels:by,segs:bF}},buildSegLevels:function(bq){var bt=[];var bs,bp;var br;bq.sort(C);for(bs=0;bs<bq.length;bs++){bp=bq[bs];for(br=0;br<bt.length;br++){if(!F(bp,bt[br])){break}}bp.level=br;(bt[br]||(bt[br]=[])).push(bp)}for(br=0;br<bt.length;br++){bt[br].sort(aK)}return bt},groupSegRows:function(bq){var bp=[];var br;for(br=0;br<this.rowCnt;br++){bp.push([])}for(br=0;br<bq.length;br++){bp[bq[br].row].push(bq[br])}return bp}});function F(bp,bs){var bq,br;for(bq=0;bq<bs.length;bq++){br=bs[bq];if(br.leftCol<=bp.rightCol&&br.rightCol>=bp.leftCol){return true}}return false}function aK(bq,bp){return bq.leftCol-bp.leftCol}a7.mixin({segPopover:null,popoverSegs:null,destroySegPopover:function(){if(this.segPopover){this.segPopover.hide()}},limitRows:function(br){var bp=this.rowStructs||[];var bs;var bq;for(bs=0;bs<bp.length;bs++){this.unlimitRow(bs);if(!br){bq=false}else{if(typeof br==="number"){bq=br}else{bq=this.computeRowLevelLimit(bs)}}if(bq!==false){this.limitRow(bs,bq)}}},computeRowLevelLimit:function(bw){var br=this.rowEls.eq(bw);var bv=br.height();var bq=this.rowStructs[bw].tbodyEl.children();var bs,bu;var bp;function bt(by,bx){bp=Math.max(bp,aW(bx).outerHeight())}for(bs=0;bs<bq.length;bs++){bu=bq.eq(bs).removeClass("fc-limited");bp=0;bu.find("> td > :first-child").each(bt);if(bu.position().top+bp>bv){return bs}}return false},limitRow:function(by,bC){var bE=this;var bs=this.rowStructs[by];var bx=[];var bw=0;var bp;var bq;var bv;var bJ;var bH,bI;var bL;var bz;var br;var bA,bK;var bu;var bF;var bt,bG,bD;function bB(bM){while(bw<bM){bp=bE.getCell(by,bw);bL=bE.getCellSegs(bp,bC);if(bL.length){bA=bv[bC-1][bw];bD=bE.renderMoreLink(bp,bL);bG=aW("<div/>").append(bD);bA.append(bG);bx.push(bG[0])}bw++}}if(bC&&bC<bs.segLevels.length){bq=bs.segLevels[bC-1];bv=bs.cellMatrix;bJ=bs.tbodyEl.children().slice(bC).addClass("fc-limited").get();for(bH=0;bH<bq.length;bH++){bI=bq[bH];bB(bI.leftCol);br=[];bz=0;while(bw<=bI.rightCol){bp=this.getCell(by,bw);bL=this.getCellSegs(bp,bC);br.push(bL);bz+=bL.length;bw++}if(bz){bA=bv[bC-1][bI.leftCol];bK=bA.attr("rowspan")||1;bu=[];for(bF=0;bF<br.length;bF++){bt=aW('<td class="fc-more-cell"/>').attr("rowspan",bK);bL=br[bF];bp=this.getCell(by,bI.leftCol+bF);bD=this.renderMoreLink(bp,[bI].concat(bL));bG=aW("<div/>").append(bD);bt.append(bG);bu.push(bt[0]);bx.push(bt[0])}bA.addClass("fc-limited").after(aW(bu));bJ.push(bA[0])}}bB(this.colCnt);bs.moreEls=aW(bx);bs.limitedEls=aW(bJ)}},unlimitRow:function(bq){var bp=this.rowStructs[bq];if(bp.moreEls){bp.moreEls.remove();bp.moreEls=null}if(bp.limitedEls){bp.limitedEls.removeClass("fc-limited");bp.limitedEls=null}},renderMoreLink:function(bp,br){var bs=this;var bq=this.view;return aW('<a class="fc-more"/>').text(this.getMoreLinkText(br.length)).on("click",function(bx){var bA=bq.opt("eventLimitClick");var bu=bp.start;var by=aW(this);var bz=bs.getCellDayEl(bp);var bt=bs.getCellSegs(bp);var bv=bs.resliceDaySegs(bt,bu);var bw=bs.resliceDaySegs(br,bu);if(typeof bA==="function"){bA=bq.trigger("eventLimitClick",null,{date:bu,dayEl:bz,moreEl:by,segs:bv,hiddenSegs:bw},bx)}if(bA==="popover"){bs.showSegPopover(bp,by,bv)}else{if(typeof bA==="string"){bq.calendar.zoomTo(bu,bA)}}})},showSegPopover:function(bp,bw,br){var bv=this;var bq=this.view;var bt=bw.parent();var bu;var bs;if(this.rowCnt==1){bu=bq.el}else{bu=this.rowEls.eq(bp.row)}bs={className:"fc-more-popover",content:this.renderSegPopoverContent(bp,br),parentEl:this.el,top:bu.offset().top,autoHide:true,viewportConstrain:bq.opt("popoverViewportConstrain"),hide:function(){bv.segPopover.destroy();bv.segPopover=null;bv.popoverSegs=null}};if(this.isRTL){bs.right=bt.offset().left+bt.outerWidth()+1}else{bs.left=bt.offset().left-1}this.segPopover=new n(bs);this.segPopover.show()},renderSegPopoverContent:function(bp,br){var bq=this.view;var bw=bq.opt("theme");var bv=bp.start.format(bq.opt("dayPopoverFormat"));var bu=aW('<div class="fc-header '+bq.widgetHeaderClass+'"><span class="fc-close '+(bw?"ui-icon ui-icon-closethick":"fc-icon fc-icon-x")+'"></span><span class="fc-title">'+bj(bv)+'</span><div class="fc-clear"/></div><div class="fc-body '+bq.widgetContentClass+'"><div class="fc-event-container"></div></div>');var bt=bu.find(".fc-event-container");var bs;br=this.renderFgSegEls(br,true);this.popoverSegs=br;for(bs=0;bs<br.length;bs++){br[bs].cell=bp;bt.append(br[bs].el)}return bu},resliceDaySegs:function(br,bp){var bt=aW.map(br,function(bv){return bv.event});var bq=bp.clone().stripTime();var bu=bq.clone().add(1,"days");var bs={start:bq,end:bu};br=this.eventsToSegs(bt,function(bw){var bv=aU(bw,bs);return bv?[bv]:[]});br.sort(C);return br},getMoreLinkText:function(bp){var bq=this.view.opt("eventLimitText");if(typeof bq==="function"){return bq(bp)}else{return"+"+bp+" "+bq}},getCellSegs:function(bp,bs){var bt=this.rowStructs[bp.row].segMatrix;var bu=bs||0;var br=[];var bq;while(bu<bt.length){bq=bt[bu][bp.col];if(bq){br.push(bq)}bu++}return br}});var i=aM.extend({slotDuration:null,snapDuration:null,minTime:null,maxTime:null,axisFormat:null,dayEls:null,slatEls:null,slatTops:null,helperEl:null,businessHourSegs:null,constructor:function(){aM.apply(this,arguments);this.processOptions()},renderDates:function(){this.el.html(this.renderHtml());this.dayEls=this.el.find(".fc-day");this.slatEls=this.el.find(".fc-slats tr")},renderBusinessHours:function(){var bp=this.view.calendar.getBusinessHoursEvents();this.businessHourSegs=this.renderFill("businessHours",this.eventsToSegs(bp),"bgevent")},renderHtml:function(){return'<div class="fc-bg"><table>'+this.rowHtml("slotBg")+'</table></div><div class="fc-slats"><table>'+this.slatRowHtml()+"</table></div>"},slotBgCellHtml:function(bp){return this.bgCellHtml(bp)},slatRowHtml:function(){var bp=this.view;var bu=this.isRTL;var bt="";var bs=this.slotDuration.asMinutes()%15===0;var bv=D.duration(+this.minTime);var bq;var br;var bw;while(bv<this.maxTime){bq=this.start.clone().time(bv);br=bq.minutes();bw='<td class="fc-axis fc-time '+bp.widgetContentClass+'" '+bp.axisStyleAttr()+">"+((!bs||!br)?"<span>"+bj(bq.format(this.axisFormat))+"</span>":"")+"</td>";bt+="<tr "+(!br?"":'class="fc-minor"')+">"+(!bu?bw:"")+'<td class="'+bp.widgetContentClass+'"/>'+(bu?bw:"")+"</tr>";bv.add(this.slotDuration)}return bt},processOptions:function(){var bp=this.view;var br=bp.opt("slotDuration");var bq=bp.opt("snapDuration");br=D.duration(br);bq=bq?D.duration(bq):br;this.slotDuration=br;this.snapDuration=bq;this.cellDuration=bq;this.minTime=D.duration(bp.opt("minTime"));this.maxTime=D.duration(bp.opt("maxTime"));this.axisFormat=bp.opt("axisFormat")||bp.opt("smallTimeFormat")},computeColHeadFormat:function(){if(this.colCnt>1){return this.view.opt("dayOfMonthFormat")}else{return"dddd"}},computeEventTimeFormat:function(){return this.view.opt("noMeridiemTimeFormat")},computeDisplayEventEnd:function(){return true},updateCells:function(){var bp=this.view;var br=[];var bq;bq=this.start.clone();while(bq.isBefore(this.end)){br.push({day:bq.clone()});bq.add(1,"day");bq=bp.skipHiddenDays(bq)}if(this.isRTL){br.reverse()}this.colData=br;this.colCnt=br.length;this.rowCnt=Math.ceil((this.maxTime-this.minTime)/this.snapDuration)},computeCellDate:function(bp){var bq=this.computeSnapTime(bp.row);return this.view.calendar.rezoneDate(bp.day).time(bq)},getColEl:function(bp){return this.dayEls.eq(bp)},computeSnapTime:function(bp){return D.duration(this.minTime+this.snapDuration*bp)},rangeToSegs:function(bs){var bu=this.colCnt;var bq=[];var bp;var bt;var bv;var br;bs={start:bs.start.clone().stripZone(),end:bs.end.clone().stripZone()};for(bt=0;bt<bu;bt++){bv=this.colData[bt].day;br={start:bv.clone().time(this.minTime),end:bv.clone().time(this.maxTime)};bp=aU(bs,br);if(bp){bp.col=bt;bq.push(bp)}}return bq},updateSize:function(bp){this.computeSlatTops();if(bp){this.updateSegVerticals()}},computeRowCoords:function(){var bs=this.el.offset().top;var bp=[];var bq;var br;for(bq=0;bq<this.rowCnt;bq++){br={top:bs+this.computeTimeTop(this.computeSnapTime(bq))};if(bq>0){bp[bq-1].bottom=br.top}bp.push(br)}br.bottom=br.top+this.computeTimeTop(this.computeSnapTime(bq));return bp},computeDateTop:function(bp,bq){return this.computeTimeTop(D.duration(bp.clone().stripZone()-bq.clone().stripTime()))},computeTimeTop:function(bu){var bs=(bu-this.minTime)/this.slotDuration;var br;var bq;var bt;var bp;bs=Math.max(0,bs);bs=Math.min(this.slatEls.length,bs);br=Math.floor(bs);bq=bs-br;bt=this.slatTops[br];if(bq){bp=this.slatTops[br+1];return bt+(bp-bt)*bq}else{return bt}},computeSlatTops:function(){var bq=[];var bp;this.slatEls.each(function(br,bs){bp=aW(bs).position().top;bq.push(bp)});bq.push(bp+this.slatEls.last().outerHeight());this.slatTops=bq},renderDrag:function(bq,bp){if(bp){this.renderRangeHelper(bq,bp);this.applyDragOpacity(this.helperEl);return true}else{this.renderHighlight(this.view.calendar.ensureVisibleEventRange(bq))}},destroyDrag:function(){this.destroyHelper();this.destroyHighlight()},renderEventResize:function(bq,bp){this.renderRangeHelper(bq,bp)},destroyEventResize:function(){this.destroyHelper()},renderHelper:function(bv,bt){var br=this.eventsToSegs([bv]);var bq;var bu,bp;var bs;br=this.renderFgSegEls(br);bq=this.renderSegTable(br);for(bu=0;bu<br.length;bu++){bp=br[bu];if(bt&&bt.col===bp.col){bs=bt.el;bp.el.css({left:bs.css("left"),right:bs.css("right"),"margin-left":bs.css("margin-left"),"margin-right":bs.css("margin-right")})}}this.helperEl=aW('<div class="fc-helper-skeleton"/>').append(bq).appendTo(this.el)},destroyHelper:function(){if(this.helperEl){this.helperEl.remove();this.helperEl=null}},renderSelection:function(bp){if(this.view.opt("selectHelper")){this.renderRangeHelper(bp)}else{this.renderHighlight(bp)}},destroySelection:function(){this.destroyHelper();this.destroyHighlight()},renderFill:function(by,bq,bx){var bu;var br;var bA;var bs,bB;var bz;var bw;var bp;var bv,bt;if(bq.length){bq=this.renderFillSegEls(by,bq);bu=this.groupSegCols(bq);bx=bx||by.toLowerCase();br=aW('<div class="fc-'+bx+'-skeleton"><table><tr/></table></div>');bA=br.find("tr");for(bs=0;bs<bu.length;bs++){bB=bu[bs];bz=aW("<td/>").appendTo(bA);if(bB.length){bw=aW('<div class="fc-'+bx+'-container"/>').appendTo(bz);bp=this.colData[bs].day;for(bv=0;bv<bB.length;bv++){bt=bB[bv];bw.append(bt.el.css({top:this.computeDateTop(bt.start,bp),bottom:-this.computeDateTop(bt.end,bp)}))}}}this.bookendCells(bA,by);this.el.append(br);this.elsByFill[by]=br}return bq}});i.mixin({eventSkeletonEl:null,renderFgSegs:function(bp){bp=this.renderFgSegEls(bp);this.el.append(this.eventSkeletonEl=aW('<div class="fc-content-skeleton"/>').append(this.renderSegTable(bp)));return bp},destroyFgSegs:function(bp){if(this.eventSkeletonEl){this.eventSkeletonEl.remove();this.eventSkeletonEl=null}},renderSegTable:function(bp){var br=aW("<table><tr/></table>");var bw=br.find("tr");var bs;var bu,bt;var bq,bx;var bv;bs=this.groupSegCols(bp);this.computeSegVerticals(bp);for(bq=0;bq<bs.length;bq++){bx=bs[bq];aO(bx);bv=aW('<div class="fc-event-container"/>');for(bu=0;bu<bx.length;bu++){bt=bx[bu];bt.el.css(this.generateSegPositionCss(bt));if(bt.bottom-bt.top<30){bt.el.addClass("fc-short")}bv.append(bt.el)}bw.append(aW("<td/>").append(bv))}this.bookendCells(bw,"eventSkeleton");return br},updateSegVerticals:function(){var bp=(this.segs||[]).concat(this.businessHourSegs||[]);var bq;this.computeSegVerticals(bp);for(bq=0;bq<bp.length;bq++){bp[bq].el.css(this.generateSegVerticalCss(bp[bq]))}},computeSegVerticals:function(bq){var br,bp;for(br=0;br<bq.length;br++){bp=bq[br];bp.top=this.computeDateTop(bp.start,bp.start);bp.bottom=this.computeDateTop(bp.end,bp.start)}},fgSegHtml:function(by,br){var bA=this.view;var bq=by.event;var bp=bA.isEventDraggable(bq);var bw=!br&&by.isStart&&bA.isEventResizableFromStart(bq);var bv=!br&&by.isEnd&&bA.isEventResizableFromEnd(bq);var bx=this.getSegClasses(by,bp,bw||bv);var bB=aB(this.getEventSkinCss(bq));var bu;var bz;var bs;bx.unshift("fc-time-grid-event","fc-v-event");if(bA.isMultiDayEvent(bq)){if(by.isStart||by.isEnd){bu=this.getEventTimeText(by);bz=this.getEventTimeText(by,"LT");bs=this.getEventTimeText(by,null,false)}}else{bu=this.getEventTimeText(bq);bz=this.getEventTimeText(bq,"LT");bs=this.getEventTimeText(bq,null,false)}var bt="icon-calendar";if(bq.set=="Task"){bt="icon-tasks"}return'<a class="'+bx.join(" ")+'"'+(bq.url?' href="'+bj(bq.url)+'"':"")+(bB?' style="'+bB+'"':"")+'><span class="fc-info"><i class="icon-info-sign"></i></span><div class="fc-content">'+(bu?'<div class="fc-time" data-start="'+bj(bs)+'" data-full="'+bj(bz)+'"><span><i class="icon-time"></i> '+bj(bu)+"</span></div>":"")+(bq.title?'<div class="fc-title"><i class="'+bt+'"></i> '+bq.title+"</div>":"")+(bq.accname?'<div class="fc-parentlabel"><i class="calIcon modIcon_Accounts"></i>'+bq.accname+"</div>":"")+(bq.linkl?'<div class="fc-parentlabel"><i class="calIcon modIcon_'+bq.linkm+'"></i> '+bq.linkl+"</div>":"")+'</div><div class="fc-bg"/>'+(bv?'<div class="fc-resizer fc-end-resizer" />':"")+"</a>"},generateSegPositionCss:function(bp){var bs=this.view.opt("slotEventOverlap");var bq=bp.backwardCoord;var br=bp.forwardCoord;var bu=this.generateSegVerticalCss(bp);var bv;var bt;if(bs){br=Math.min(1,bq+(br-bq)*2)}if(this.isRTL){bv=1-br;bt=bq}else{bv=bq;bt=1-br}bu.zIndex=bp.level+1;bu.left=bv*100+"%";bu.right=bt*100+"%";if(bs&&bp.forwardPressure){bu[this.isRTL?"marginLeft":"marginRight"]=10*2}return bu},generateSegVerticalCss:function(bp){return{top:bp.top,bottom:-bp.bottom}},groupSegCols:function(bq){var bp=[];var br;for(br=0;br<this.colCnt;br++){bp.push([])}for(br=0;br<bq.length;br++){bp[bq[br].col].push(bq[br])}return bp}});function aO(bp){var br;var bs;var bq;bp.sort(C);br=J(bp);au(br);if((bs=br[0])){for(bq=0;bq<bs.length;bq++){aE(bs[bq])}for(bq=0;bq<bs.length;bq++){aa(bs[bq],0,0)}}}function J(bq){var bt=[];var bs,bp;var br;for(bs=0;bs<bq.length;bs++){bp=bq[bs];for(br=0;br<bt.length;br++){if(!bn(bp,bt[br]).length){break}}bp.level=br;(bt[br]||(bt[br]=[])).push(bp)}return bt}function au(bt){var bs,bu;var br,bp;var bq;for(bs=0;bs<bt.length;bs++){bu=bt[bs];for(br=0;br<bu.length;br++){bp=bu[br];bp.forwardSegs=[];for(bq=bs+1;bq<bt.length;bq++){bn(bp,bt[bq],bp.forwardSegs)}}}}function aE(bq){var bp=bq.forwardSegs;var bt=0;var bs,br;if(bq.forwardPressure===undefined){for(bs=0;bs<bp.length;bs++){br=bp[bs];aE(br);bt=Math.max(bt,1+br.forwardPressure)}bq.forwardPressure=bt}}function aa(bq,bs,bt){var bp=bq.forwardSegs;var br;if(bq.forwardCoord===undefined){if(!bp.length){bq.forwardCoord=1}else{bp.sort(a3);aa(bp[0],bs+1,bt);bq.forwardCoord=bp[0].backwardCoord}bq.backwardCoord=bq.forwardCoord-(bq.forwardCoord-bt)/(bs+1);for(br=0;br<bp.length;br++){aa(bp[br],0,bq.forwardCoord)}}}function bn(bp,bs,br){br=br||[];for(var bq=0;bq<bs.length;bq++){if(h(bp,bs[bq])){br.push(bs[bq])}}return br}function h(bq,bp){return bq.bottom>bp.top&&bq.top<bp.bottom}function a3(bq,bp){return bp.forwardPressure-bq.forwardPressure||(bq.backwardCoord||0)-(bp.backwardCoord||0)||C(bq,bp)}var bh=be.View=a6.extend({type:null,name:null,title:null,calendar:null,options:null,coordMap:null,el:null,isDisplayed:false,isSkeletonRendered:false,isEventsRendered:false,start:null,end:null,intervalStart:null,intervalEnd:null,intervalDuration:null,intervalUnit:null,isSelected:false,scrollerEl:null,scrollTop:null,widgetHeaderClass:null,widgetContentClass:null,highlightStateClass:null,nextDayThreshold:null,isHiddenDayHash:null,documentMousedownProxy:null,constructor:function(bs,br,bp,bq){this.calendar=bs;this.type=this.name=br;this.options=bp;this.intervalDuration=bq||D.duration(1,"day");this.nextDayThreshold=D.duration(this.opt("nextDayThreshold"));this.initThemingProps();this.initHiddenDays();this.documentMousedownProxy=y(this,"documentMousedown");this.initialize()},initialize:function(){},opt:function(bp){return this.options[bp]},trigger:function(bp,br){var bq=this.calendar;return bq.trigger.apply(bq,[bp,br||this].concat(Array.prototype.slice.call(arguments,2),[this]))},setDate:function(bp){this.setRange(this.computeRange(bp))},setRange:function(bp){aW.extend(this,bp);this.updateTitle()},computeRange:function(br){var bu=U(this.intervalDuration);var bs=br.clone().startOf(bu);var bq=bs.clone().add(this.intervalDuration);var bt,bp;if(/year|month|week|day/.test(bu)){bs.stripTime();bq.stripTime()}else{if(!bs.hasTime()){bs=this.calendar.rezoneDate(bs)}if(!bq.hasTime()){bq=this.calendar.rezoneDate(bq)}}bt=bs.clone();bt=this.skipHiddenDays(bt);bp=bq.clone();bp=this.skipHiddenDays(bp,-1,true);return{intervalUnit:bu,intervalStart:bs,intervalEnd:bq,start:bt,end:bp}},computePrevDate:function(bp){return this.massageCurrentDate(bp.clone().startOf(this.intervalUnit).subtract(this.intervalDuration),-1)},computeNextDate:function(bp){return this.massageCurrentDate(bp.clone().startOf(this.intervalUnit).add(this.intervalDuration))},massageCurrentDate:function(bp,bq){if(this.intervalDuration.as("days")<=1){if(this.isHiddenDay(bp)){bp=this.skipHiddenDays(bp,bq);bp.startOf("day")}}return bp},updateTitle:function(){this.title=this.computeTitle()},computeTitle:function(){return this.formatRange({start:this.intervalStart,end:this.intervalEnd},this.opt("titleFormat")||this.computeTitleFormat(),this.opt("titleRangeSeparator"))},computeTitleFormat:function(){if(this.intervalUnit=="year"){return"YYYY"}else{if(this.intervalUnit=="month"){return this.opt("monthYearFormat")}else{if(this.intervalDuration.as("days")>1){return"ll"}else{return"LL"}}}},formatRange:function(br,bq,bs){var bp=br.end;if(!bp.hasTime()){bp=bp.clone().subtract(1)}return W(br.start,bp,bq,bs,this.opt("isRTL"))},setElement:function(bp){this.el=bp;this.bindGlobalHandlers()},removeElement:function(){this.clear();if(this.isSkeletonRendered){this.destroySkeleton();this.isSkeletonRendered=false}this.unbindGlobalHandlers();this.el.remove()},display:function(bp){var bq=null;if(this.isDisplayed){bq=this.queryScroll()}this.clear();this.setDate(bp);this.render();this.updateSize();this.renderBusinessHours();this.isDisplayed=true;bq=this.computeInitialScroll(bq);this.forceScroll(bq);this.triggerRender()},clear:function(){if(this.isDisplayed){this.unselect();this.clearEvents();this.triggerDestroy();this.destroyBusinessHours();this.destroy();this.isDisplayed=false}},render:function(){if(!this.isSkeletonRendered){this.renderSkeleton();this.isSkeletonRendered=true}this.renderDates()},destroy:function(){this.destroyDates()},renderSkeleton:function(){},destroySkeleton:function(){},renderDates:function(){},destroyDates:function(){},renderBusinessHours:function(){},destroyBusinessHours:function(){},triggerRender:function(){this.trigger("viewRender",this,this,this.el)},triggerDestroy:function(){this.trigger("viewDestroy",this,this,this.el)},bindGlobalHandlers:function(){aW(document).on("mousedown",this.documentMousedownProxy)},unbindGlobalHandlers:function(){aW(document).off("mousedown",this.documentMousedownProxy)},initThemingProps:function(){var bp=this.opt("theme")?"ui":"fc";this.widgetHeaderClass=bp+"-widget-header";this.widgetContentClass=bp+"-widget-content";this.highlightStateClass=bp+"-state-highlight"},updateSize:function(bp){var bq;if(bp){bq=this.queryScroll()}this.updateHeight();this.updateWidth();if(bp){this.setScroll(bq)}},updateWidth:function(){},updateHeight:function(){var bp=this.calendar;this.setHeight(bp.getSuggestedViewHeight(),bp.isHeightAuto())},setHeight:function(bq,bp){},computeScrollerHeight:function(bq){var bp=this.scrollerEl;var bs;var br;bs=this.el.add(bp);bs.css({position:"relative",left:-1});br=this.el.outerHeight()-bp.height();bs.css({position:"",left:""});return bq-br},computeInitialScroll:function(bp){return 0},queryScroll:function(){if(this.scrollerEl){return this.scrollerEl.scrollTop()}},setScroll:function(bp){if(this.scrollerEl){return this.scrollerEl.scrollTop(bp)}},forceScroll:function(bp){var bq=this;this.setScroll(bp);setTimeout(function(){bq.setScroll(bp)},0)},displayEvents:function(bp){var bq=this.queryScroll();this.clearEvents();this.renderEvents(bp);this.isEventsRendered=true;this.setScroll(bq);this.triggerEventRender()},clearEvents:function(){if(this.isEventsRendered){this.triggerEventDestroy();this.destroyEvents();this.isEventsRendered=false}},renderEvents:function(bp){},destroyEvents:function(){},triggerEventRender:function(){this.renderedEventSegEach(function(bp){this.trigger("eventAfterRender",bp.event,bp.event,bp.el)});this.trigger("eventAfterAllRender")},triggerEventDestroy:function(){this.renderedEventSegEach(function(bp){this.trigger("eventDestroy",bp.event,bp.event,bp.el)})},resolveEventEl:function(bq,bp){var br=this.trigger("eventRender",bq,bq,bp);if(br===false){bp=null}else{if(br&&br!==true){bp=aW(br)}}return bp},showEvent:function(bp){this.renderedEventSegEach(function(bq){bq.el.css("visibility","")},bp)},hideEvent:function(bp){this.renderedEventSegEach(function(bq){bq.el.css("visibility","hidden")},bp)},renderedEventSegEach:function(bs,br){var bp=this.getEventSegs();var bq;for(bq=0;bq<bp.length;bq++){if(!br||bp[bq].event._id===br._id){if(bp[bq].el){bs.call(this,bp[bq])}}}},getEventSegs:function(){return[]},isEventDraggable:function(bp){var bq=bp.source||{};return bl(bp.startEditable,bq.startEditable,this.opt("eventStartEditable"),bp.editable,bq.editable,this.opt("editable"))},reportEventDrop:function(bu,bt,br,bq,bs){var bw=this.calendar;var bv=bw.mutateEvent(bu,bt,br);var bp=function(){bv.undo();bw.reportEventChange()};this.triggerEventDrop(bu,bv.dateDelta,bp,bq,bs);bw.reportEventChange()},triggerEventDrop:function(bs,bt,bp,bq,br){this.trigger("eventDrop",bq[0],bs,bt,bp,br,{})},reportExternalDrop:function(bw,bt,bq,bs,bv){var bu=bw.eventProps;var bp;var br;if(bu){bp=aW.extend({},bu,bt);br=this.calendar.renderEvent(bp,bw.stick)[0]}this.triggerExternalDrop(br,bt,bq,bs,bv)},triggerExternalDrop:function(bs,br,bp,bq,bt){this.trigger("drop",bp[0],br.start,bq,bt);if(bs){this.trigger("eventReceive",null,bs)}},renderDrag:function(bq,bp){},destroyDrag:function(){},isEventResizableFromStart:function(bp){return this.opt("eventResizableFromStart")&&this.isEventResizable(bp)},isEventResizableFromEnd:function(bp){return this.isEventResizable(bp)},isEventResizable:function(bp){var bq=bp.source||{};return bl(bp.durationEditable,bq.durationEditable,this.opt("eventDurationEditable"),bp.editable,bq.editable,this.opt("editable"))},reportEventResize:function(bt,bw,br,bq,bs){var bv=this.calendar;var bu=bv.mutateEvent(bt,bw,br);var bp=function(){bu.undo();bv.reportEventChange()};this.triggerEventResize(bt,bu.durationDelta,bp,bq,bs);bv.reportEventChange()},triggerEventResize:function(bt,bq,bp,br,bs){this.trigger("eventResize",br[0],bt,bq,bp,bs,{})},select:function(bp,bq){this.unselect(bq);this.renderSelection(bp);this.reportSelection(bp,bq)},renderSelection:function(bp){},reportSelection:function(bp,bq){this.isSelected=true;this.trigger("select",null,bp.start,bp.end,bq)},unselect:function(bp){if(this.isSelected){this.isSelected=false;this.destroySelection();this.trigger("unselect",null,bp)}},destroySelection:function(){},documentMousedown:function(bp){var bq;if(this.isSelected&&this.opt("unselectAuto")&&ae(bp)){bq=this.opt("unselectCancel");if(!bq||!aW(bp.target).closest(bq).length){this.unselect(bp)}}},initHiddenDays:function(){var bq=this.opt("hiddenDays")||[];var bs=[];var bp=0;var br;if(this.opt("weekends")===false){bq.push(0,6)}for(br=0;br<7;br++){if(!(bs[br]=aW.inArray(br,bq)!==-1)){bp++}}if(!bp){throw"invalid hiddenDays"}this.isHiddenDayHash=bs},isHiddenDay:function(bp){if(D.isMoment(bp)){bp=bp.day()}return this.isHiddenDayHash[bp]},skipHiddenDays:function(br,bs,bp){var bq=br.clone();bs=bs||1;while(this.isHiddenDayHash[(bq.day()+(bp?bs:0)+7)%7]){bq.add(bs,"days")}return bq},computeDayRange:function(bq){var bt=bq.start.clone().stripTime();var bp=bq.end;var bs=null;var br;if(bp){bs=bp.clone().stripTime();br=+bp.time();if(br&&br>=this.nextDayThreshold){bs.add(1,"days")}}if(!bp||bs<=bt){bs=bt.clone().add(1,"days")}return{start:bt,end:bs}},isMultiDayEvent:function(bq){var bp=this.computeDayRange(bq);return bp.end.diff(bp.start,"days")>1}});var s=be.Calendar=be.CalendarBase=a6.extend({dirDefaults:null,langDefaults:null,overrides:null,options:null,viewSpecCache:null,view:null,header:null,constructor:a1,initOptions:function(bt){var bs,bp;var bq,br;bt=a2(bt);bs=bt.lang;bp=aY[bs];if(!bp){bs=s.defaults.lang;bp=aY[bs]||{}}bq=bl(bt.isRTL,bp.isRTL,s.defaults.isRTL);br=bq?s.rtlDefaults:{};this.dirDefaults=br;this.langDefaults=bp;this.overrides=bt;this.options=ba(s.defaults,br,bp,bt);av(this.options);this.viewSpecCache={}},getViewSpec:function(bp){var bq=this.viewSpecCache;return bq[bp]||(bq[bp]=this.buildViewSpec(bp))},getUnitViewSpec:function(bs){var br;var bq;var bp;if(aW.inArray(bs,j)!=-1){br=this.header.getViewsWithButtons();aW.each(be.views,function(bt){br.push(bt)});for(bq=0;bq<br.length;bq++){bp=this.getViewSpec(br[bq]);if(bp){if(bp.singleUnit==bs){return bp}}}}},buildViewSpec:function(bs){var bv=this.overrides.views||{};var bz=[];var bp=[];var bt=bs;var bu;var br;var bx;var bq;var bw;var by;while(bt&&!bu){br=aJ[bt]||{};bx=bv[bt]||{};bq=bq||bx.duration||br.duration;bt=bx.type||br.type;if(typeof br==="function"){bu=br;bz.unshift(bu.defaults||{})}else{bz.unshift(br)}bp.unshift(bx)}if(bu){by={"class":bu,type:bs};if(bq){bq=D.duration(bq);if(!bq.valueOf()){bq=null}}if(bq){by.duration=bq;bw=U(bq);if(bq.as(bw)===1){by.singleUnit=bw;bp.unshift(bv[bw]||{})}}by.defaults=ba.apply(null,bz);by.overrides=ba.apply(null,bp);this.buildViewSpecOptions(by);this.buildViewSpecButtonText(by,bs);return by}},buildViewSpecOptions:function(bp){bp.options=ba(s.defaults,bp.defaults,this.dirDefaults,this.langDefaults,this.overrides,bp.overrides);av(bp.options)},buildViewSpecButtonText:function(bq,br){function bp(bs){var bt=bs.buttonText||{};return bt[br]||(bq.singleUnit?bt[bq.singleUnit]:null)}bq.buttonTextOverride=bp(this.overrides)||bq.overrides.buttonText;bq.buttonTextDefault=bp(this.langDefaults)||bp(this.dirDefaults)||bq.defaults.buttonText||bp(s.defaults)||(bq.duration?this.humanizeDuration(bq.duration):null)||br},instantiateView:function(bp){var bq=this.getViewSpec(bp);return new bq["class"](this,bp,bq.options,bq.duration)},isValidViewType:function(bp){return Boolean(this.getViewSpec(bp))}});function a1(bG,b6){var b8=this;b8.initOptions(b6||{});var bN=this.options;b8.render=bW;b8.destroy=ca;b8.refetchEvents=bC;b8.reportEvents=bE;b8.reportEventChange=cc;b8.rerenderEvents=bw;b8.changeView=bM;b8.select=b9;b8.unselect=bz;b8.prev=bT;b8.next=bs;b8.prevYear=cb;b8.nextYear=bq;b8.today=bH;b8.gotoDate=bV;b8.incrementDate=bK;b8.zoomTo=cg;b8.getDate=bL;b8.getCalendar=b0;b8.getView=bR;b8.option=b3;b8.trigger=bU;var bY=ab(ah(bN.lang));if(bN.monthNames){bY._months=bN.monthNames}if(bN.monthNamesShort){bY._monthsShort=bN.monthNamesShort}if(bN.dayNames){bY._weekdays=bN.dayNames}if(bN.dayNamesShort){bY._weekdaysShort=bN.dayNamesShort}if(bN.firstDay!=null){var br=ab(bY._week);br.dow=bN.firstDay;bY._week=br}bY._fullCalendar_weekCalc=(function(ci){if(typeof ci==="function"){return ci}else{if(ci==="local"){return ci}else{if(ci==="iso"||ci==="ISO"){return"ISO"}}}})(bN.weekNumberCalculation);b8.defaultAllDayEventDuration=D.duration(bN.defaultAllDayEventDuration);b8.defaultTimedEventDuration=D.duration(bN.defaultTimedEventDuration);b8.moment=function(){var ci;if(bN.timezone==="local"){ci=be.moment.apply(null,arguments);if(ci.hasTime()){ci.local()}}else{if(bN.timezone==="UTC"){ci=be.moment.utc.apply(null,arguments)}else{ci=be.moment.parseZone.apply(null,arguments)}}if("_locale" in ci){ci._locale=bY}else{ci._lang=bY}return ci};b8.getIsAmbigTimezone=function(){return bN.timezone!=="local"&&bN.timezone!=="UTC"};b8.rezoneDate=function(ci){return b8.moment(ci.toArray())};b8.getNow=function(){var ci=bN.now;if(typeof ci==="function"){ci=ci()}return b8.moment(ci)};b8.getEventEnd=function(ci){if(ci.end){return ci.end.clone()}else{return b8.getDefaultEventEnd(ci.allDay,ci.start)}};b8.getDefaultEventEnd=function(cj,ck){var ci=ck.clone();if(cj){ci.stripTime().add(b8.defaultAllDayEventDuration)}else{ci.add(b8.defaultTimedEventDuration)}if(b8.getIsAmbigTimezone()){ci.stripZone()}return ci};b8.humanizeDuration=function(ci){return(ci.locale||ci.lang).call(ci,bN.lang).humanize()};r.call(b8,bN);var bp=b8.isFetchNeeded;var cf=b8.fetchEvents;var b4=bG[0];var bu;var bX;var bB;var ch;var bA;var b7={};var bx;var ce;var b5=0;var cd;var bP=[];if(bN.defaultDate!=null){cd=b8.moment(bN.defaultDate)}else{cd=b8.getNow()}function bW(){if(!bB){bO()}else{if(b2()){bZ();bM()}}}function bO(){ch=bN.theme?"ui":"fc";bG.addClass("fc");if(bN.isRTL){bG.addClass("fc-rtl")}else{bG.addClass("fc-ltr")}if(bN.theme){bG.addClass("ui-widget")}else{bG.addClass("fc-unthemed")}bB=aW("<div class='fc-view-container'/>").prependTo(bG);bu=b8.header=new al(b8,bN);bX=bu.render();if(bX){bG.prepend(bX)}bM(bN.defaultView);if(bN.handleWindowResize){ce=bo(bD,bN.windowResizeDelay);aW(window).resize(ce)}}function ca(){if(bA){bA.removeElement()}bu.destroy();bB.remove();bG.removeClass("fc fc-ltr fc-rtl fc-unthemed ui-widget");if(ce){aW(window).unbind("resize",ce)}}function b2(){return bG.is(":visible")}function bM(ci){b5++;if(bA&&ci&&bA.type!==ci){bu.deactivateButton(bA.type);bt();bA.removeElement();bA=b8.view=null}if(!bA&&ci){bA=b8.view=b7[ci]||(b7[ci]=b8.instantiateView(ci));bA.setElement(aW("<div class='fc-view fc-"+ci+"-view' />").appendTo(bB));bu.activateButton(ci)}if(bA){cd=bA.massageCurrentDate(cd);if(!bA.isDisplayed||!cd.isWithin(bA.intervalStart,bA.intervalEnd)){if(b2()){bt();bA.display(cd);bF();bQ();bS();by()}}}bF();b5--}b8.getSuggestedViewHeight=function(){if(bx===undefined){bZ()}return bx};b8.isHeightAuto=function(){return bN.contentHeight==="auto"||bN.height==="auto"};function bI(ci){if(b2()){if(ci){bv()}b5++;bA.updateSize(true);b5--;return true}}function bZ(){if(b2()){bv()}}function bv(){if(typeof bN.contentHeight==="number"){bx=bN.contentHeight}else{if(typeof bN.height==="number"){bx=bN.height-(bX?bX.outerHeight(true):0)}else{bx=Math.round(bB.width()/Math.max(bN.aspectRatio,0.5))}}}function bD(ci){if(!b5&&ci.target===window&&bA.start){if(bI(true)){bA.trigger("windowResize",b4)}}}function bC(){bJ();b1()}function bw(){if(b2()){bt();bA.displayEvents(bP);bF()}}function bJ(){bt();bA.clearEvents();bF()}function by(){if(!bN.lazyFetching||bp(bA.start,bA.end)){b1()}else{bw()}}function b1(){cf(bA.start,bA.end)}function bE(ci){bP=ci;bw()}function cc(){bw()}function bQ(){bu.updateTitle(bA.title)}function bS(){var ci=b8.getNow();if(ci.isWithin(bA.intervalStart,bA.intervalEnd)){bu.disableButton("today")}else{bu.enableButton("today")}}function b9(cj,ci){cj=b8.moment(cj);if(ci){ci=b8.moment(ci)}else{if(cj.hasTime()){ci=cj.clone().add(b8.defaultTimedEventDuration)}else{ci=cj.clone().add(b8.defaultAllDayEventDuration)}}bA.select({start:cj,end:ci})}function bz(){if(bA){bA.unselect()}}function bT(){cd=bA.computePrevDate(cd);bM()}function bs(){cd=bA.computeNextDate(cd);bM()}function cb(){cd.add(-1,"years");bM()}function bq(){cd.add(1,"years");bM()}function bH(){cd=b8.getNow();bM()}function bV(ci){cd=b8.moment(ci);bM()}function bK(ci){cd.add(D.duration(ci));bM()}function cg(cj,ci){var ck;ci=ci||"day";ck=b8.getViewSpec(ci)||b8.getUnitViewSpec(ci);cd=cj;bM(ck?ck.type:null)}function bL(){return cd.clone()}function bt(){bB.css({width:"100%",height:bB.height(),overflow:"hidden"})}function bF(){bB.css({width:"",height:"",overflow:""})}function b0(){return b8}function bR(){return bA}function b3(ci,cj){if(cj===undefined){return bN[ci]}if(ci=="height"||ci=="contentHeight"||ci=="aspectRatio"){bN[ci]=cj;bI(true)}}function bU(ci,cj){if(bN[ci]){return bN[ci].apply(cj||b4,Array.prototype.slice.call(arguments,2))}}}s.defaults={titleRangeSeparator:" \u2014 ",monthYearFormat:"MMMM YYYY",defaultTimedEventDuration:"02:00:00",defaultAllDayEventDuration:{days:1},forceEventDuration:false,nextDayThreshold:"09:00:00",defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:true,weekNumbers:false,weekNumberTitle:"W",weekNumberCalculation:"local",lazyFetching:true,startParam:"start",endParam:"end",timezoneParam:"timezone",timezone:false,isRTL:false,buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day"},buttonIcons:{prev:"left-single-arrow",next:"right-single-arrow",prevYear:"left-double-arrow",nextYear:"right-double-arrow"},theme:false,themeButtonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e",prevYear:"seek-prev",nextYear:"seek-next"},dragOpacity:0.75,dragRevertDuration:500,dragScroll:true,unselectAuto:true,dropAccept:"*",eventLimit:false,eventLimitText:"more",eventLimitClick:"popover",dayPopoverFormat:"LL",handleWindowResize:true,windowResizeDelay:200};s.englishDefaults={dayPopoverFormat:"dddd, MMMM D"};s.rtlDefaults={header:{left:"next,prev today",center:"",right:"title"},buttonIcons:{prev:"right-single-arrow",next:"left-single-arrow",prevYear:"right-double-arrow",nextYear:"left-double-arrow"},themeButtonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w",nextYear:"seek-prev",prevYear:"seek-next"}};var aY=be.langs={};be.datepickerLang=function(bs,bq,br){var bp=aY[bs]||(aY[bs]={});bp.isRTL=br.isRTL;bp.weekNumberTitle=br.weekHeader;aW.each(ak,function(bt,bu){bp[bt]=bu(br)});if(aW.datepicker){aW.datepicker.regional[bq]=aW.datepicker.regional[bs]=br;aW.datepicker.regional.en=aW.datepicker.regional[""];aW.datepicker.setDefaults(br)}};be.lang=function(bs,br){var bp;var bq;bp=aY[bs]||(aY[bs]={});if(br){bp=aY[bs]=ba(bp,br)}bq=ah(bs);aW.each(m,function(bt,bu){if(bp[bt]==null){bp[bt]=bu(bq,bp)}});s.defaults.lang=bs};var ak={buttonText:function(bp){return{prev:am(bp.prevText),next:am(bp.nextText),today:am(bp.currentText)}},monthYearFormat:function(bp){return bp.showMonthAfterYear?"YYYY["+bp.yearSuffix+"] MMMM":"MMMM YYYY["+bp.yearSuffix+"]"}};var m={dayOfMonthFormat:function(bq,bp){var br=bq.longDateFormat("l");br=br.replace(/^Y+[^\w\s]*|[^\w\s]*Y+$/g,"");if(bp.isRTL){br+=" ddd"}else{br="ddd "+br}return br},mediumTimeFormat:function(bp){return bp.longDateFormat("LT").replace(/\s*a$/i,"a")},smallTimeFormat:function(bp){return bp.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"a")},extraSmallTimeFormat:function(bp){return bp.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"t")},hourFormat:function(bp){return bp.longDateFormat("LT").replace(":mm","").replace(/(\Wmm)$/,"").replace(/\s*a$/i,"a")},noMeridiemTimeFormat:function(bp){return bp.longDateFormat("LT").replace(/\s*a$/i,"")}};var Z={smallDayDateFormat:function(bp){return bp.isRTL?"D dd":"dd D"},weekFormat:function(bp){return bp.isRTL?"w[ "+bp.weekNumberTitle+"]":"["+bp.weekNumberTitle+" ]w"},smallWeekFormat:function(bp){return bp.isRTL?"w["+bp.weekNumberTitle+"]":"["+bp.weekNumberTitle+"]w"}};function av(bp){aW.each(Z,function(bq,br){if(bp[bq]==null){bp[bq]=br(bp)}})}function ah(bq){var bp=D.localeData||D.langData;return bp.call(D,bq)||bp.call(D,"en")}be.lang("en",s.englishDefaults);function al(bu,bD){var bC=this;bC.render=bq;bC.destroy=bx;bC.updateTitle=bv;bC.activateButton=bp;bC.deactivateButton=bA;bC.disableButton=bt;bC.enableButton=bw;bC.getViewsWithButtons=bs;var br=aW();var by=[];var bz;function bq(){var bE=bD.header;bz=bD.theme?"ui":"fc";if(bE){br=aW("<div class='fc-toolbar'/>").append(bB("left")).append(bB("right")).append(bB("center")).append('<div class="fc-clear"/>');return br}}function bx(){br.remove()}function bB(bE){var bF=aW('<div class="fc-'+bE+'"/>');var bG=bD.header[bE];if(bG){aW.each(bG.split(" "),function(bH){var bI=aW();var bJ=true;var bK;aW.each(this.split(","),function(bP,bV){var bS;var bR;var bU;var bT;var bM;var bO;var bL;var bN;var bQ;if(bV=="title"){bI=bI.add(aW("<h2>&nbsp;</h2>"));bJ=false}else{bS=bu.getViewSpec(bV);if(bS){bR=function(){bu.changeView(bV)};by.push(bV);bU=bS.buttonTextOverride;bT=bS.buttonTextDefault}else{if(bu[bV]){bR=function(){bu[bV]()};bU=(bu.overrides.buttonText||{})[bV];bT=bD.buttonText[bV]}}if(bR){bM=bD.themeButtonIcons[bV];bO=bD.buttonIcons[bV];if(bU){bL=bj(bU)}else{if(bM&&bD.theme){bL="<span class='ui-icon ui-icon-"+bM+"'></span>"}else{if(bO&&!bD.theme){bL="<span class='fc-icon fc-icon-"+bO+"'></span>"}else{bL=bj(bT)}}}bN=["fc-"+bV+"-button",bz+"-button",bz+"-state-default"];bQ=aW('<button type="button" class="'+bN.join(" ")+'">'+bL+"</button>").click(function(){if(!bQ.hasClass(bz+"-state-disabled")){bR();if(bQ.hasClass(bz+"-state-active")||bQ.hasClass(bz+"-state-disabled")){bQ.removeClass(bz+"-state-hover")}}}).mousedown(function(){bQ.not("."+bz+"-state-active").not("."+bz+"-state-disabled").addClass(bz+"-state-down")}).mouseup(function(){bQ.removeClass(bz+"-state-down")}).hover(function(){bQ.not("."+bz+"-state-active").not("."+bz+"-state-disabled").addClass(bz+"-state-hover")},function(){bQ.removeClass(bz+"-state-hover").removeClass(bz+"-state-down")});bI=bI.add(bQ)}}});if(bJ){bI.first().addClass(bz+"-corner-left").end().last().addClass(bz+"-corner-right").end()}if(bI.length>1){bK=aW("<div/>");if(bJ){bK.addClass("fc-button-group")}bK.append(bI);bF.append(bK)}else{bF.append(bI)}})}return bF}function bv(bE){br.find("h2").text(bE)}function bp(bE){br.find(".fc-"+bE+"-button").addClass(bz+"-state-active")}function bA(bE){br.find(".fc-"+bE+"-button").removeClass(bz+"-state-active")}function bt(bE){br.find(".fc-"+bE+"-button").attr("disabled","disabled").addClass(bz+"-state-disabled")}function bw(bE){br.find(".fc-"+bE+"-button").removeAttr("disabled").removeClass(bz+"-state-disabled")}function bs(){return by}}be.sourceNormalizers=[];be.sourceFetchers=[];var q={dataType:"json",cache:false};var ar=1;function r(bR){var b1=this;b1.isFetchNeeded=bp;b1.fetchEvents=b5;b1.addEventSource=bz;b1.removeEventSource=bs;b1.updateEvent=bW;b1.renderEvent=bI;b1.removeEvents=b3;b1.clientEvents=bB;b1.mutateEvent=bq;b1.normalizeEventRange=b2;b1.normalizeEventRangeTimes=bx;b1.ensureVisibleEventRange=bO;var bU=b1.trigger;var bT=b1.getView;var bF=b1.reportEvents;var bv={events:[]};var bY=[bv];var bC,bG;var b6=0;var bM=0;var b8=0;var bE=[];aW.each((bR.events?[bR.events]:[]).concat(bR.eventSources||[]),function(b9,cb){var ca=bN(cb);if(ca){bY.push(ca)}});function bp(ca,b9){return !bC||ca.clone().stripZone()<bC.clone().stripZone()||b9.clone().stripZone()>bG.clone().stripZone()}function b5(cd,ca){bC=cd;bG=ca;bE=[];var cc=++b6;var b9=bY.length;bM=b9;for(var cb=0;cb<b9;cb++){bJ(bY[cb],cc)}}function bJ(ca,b9){bw(ca,function(cf){var ce=aW.isArray(ca.events);var cd,cc;var cb;if(b9==b6){if(cf){for(cd=0;cd<cf.length;cd++){cc=cf[cd];if(ce){cb=cc}else{cb=bu(cc,ca)}if(cb){bE.push.apply(bE,b7(cb))}}}bM--;if(!bM){bF(bE)}}})}function bw(b9,ck){var ce;var ci=be.sourceFetchers;var cg;for(ce=0;ce<ci.length;ce++){cg=ci[ce].call(b1,b9,bC.clone(),bG.clone(),bR.timezone,ck);if(cg===true){return}else{if(typeof cg=="object"){bw(cg,ck);return}}}var cm=b9.events;if(cm){if(aW.isFunction(cm)){by();cm.call(b1,bC.clone(),bG.clone(),bR.timezone,function(co){ck(co);bt()})}else{if(aW.isArray(cm)){ck(cm)}else{ck()}}}else{var ca=b9.url;if(ca){var cl=b9.success;var ch=b9.error;var cb=b9.complete;var cn;if(aW.isFunction(b9.data)){cn=b9.data()}else{cn=b9.data}var cd=aW.extend({},cn||{});var cf=bl(b9.startParam,bR.startParam);var cc=bl(b9.endParam,bR.endParam);var cj=bl(b9.timezoneParam,bR.timezoneParam);if(cf){cd[cf]=bC.format()}if(cc){cd[cc]=bG.format()}if(bR.timezone&&bR.timezone!="local"){cd[cj]=bR.timezone}by();aW.ajax(aW.extend({},q,b9,{data:cd,success:function(cp){cp=cp||[];var co=V(cl,this,arguments);if(aW.isArray(co)){cp=co}ck(cp)},error:function(){V(ch,this,arguments);ck()},complete:function(){V(cb,this,arguments);bt()}}))}else{ck()}}}function bz(ca){var b9=bN(ca);if(b9){bY.push(b9);bM++;bJ(b9,b6)}}function bN(cc){var ca=be.sourceNormalizers;var cb;var b9;if(aW.isFunction(cc)||aW.isArray(cc)){cb={events:cc}}else{if(typeof cc==="string"){cb={url:cc}}else{if(typeof cc==="object"){cb=aW.extend({},cc)}}}if(cb){if(cb.className){if(typeof cb.className==="string"){cb.className=cb.className.split(/\s+/)}}else{cb.className=[]}if(aW.isArray(cb.events)){cb.origArray=cb.events;cb.events=aW.map(cb.events,function(cd){return bu(cd,cb)})}for(b9=0;b9<ca.length;b9++){ca[b9].call(b1,cb)}return cb}}function bs(b9){bY=aW.grep(bY,function(ca){return !b0(ca,b9)});bE=aW.grep(bE,function(ca){return !b0(ca.source,b9)});bF(bE)}function b0(ca,b9){return ca&&b9&&bD(ca)==bD(b9)}function bD(b9){return((typeof b9==="object")?(b9.origArray||b9.googleCalendarId||b9.url||b9.events):null)||b9}function bW(b9){b9.start=b1.moment(b9.start);if(b9.end){b9.end=b1.moment(b9.end)}else{b9.end=null}bq(b9,br(b9));bF(bE)}function br(ca){var b9={};aW.each(ca,function(cb,cc){if(bZ(cb)){if(cc!==undefined&&aN(cc)){b9[cb]=cc}}});return b9}function bZ(b9){return !/^_|^(id|allDay|start|end)$/.test(b9)}function bI(cd,b9){var ca=bu(cd);var cc;var cb,ce;if(ca){cc=b7(ca);for(cb=0;cb<cc.length;cb++){ce=cc[cb];if(!ce.source){if(b9){bv.events.push(ce);ce.source=bv}bE.push(ce)}}bF(bE);return cc}return[]}function b3(cb){var ca;var b9;if(cb==null){cb=function(){return true}}else{if(!aW.isFunction(cb)){ca=cb+"";cb=function(cc){return cc._id==ca}}}bE=aW.grep(bE,cb,true);for(b9=0;b9<bY.length;b9++){if(aW.isArray(bY[b9].events)){bY[b9].events=aW.grep(bY[b9].events,cb,true)}}bF(bE)}function bB(b9){if(aW.isFunction(b9)){return aW.grep(bE,b9)}else{if(b9!=null){b9+="";return aW.grep(bE,function(ca){return ca._id==b9})}}return bE}function by(){if(!(b8++)){bU("loading",null,true,bT())}}function bt(){if(!(--b8)){bU("loading",null,false,bT())}}function bu(ca,cd){var cb={};var ce,b9;var cc;if(bR.eventDataTransform){ca=bR.eventDataTransform(ca)}if(cd&&cd.eventDataTransform){ca=cd.eventDataTransform(ca)}aW.extend(cb,ca);if(cd){cb.source=cd}cb._id=ca._id||(ca.id===undefined?"_fc"+ar++:ca.id+"");if(ca.className){if(typeof ca.className=="string"){cb.className=ca.className.split(/\s+/)}else{cb.className=ca.className}}else{cb.className=[]}ce=ca.start||ca.date;b9=ca.end;if(P(ce)){ce=D.duration(ce)}if(P(b9)){b9=D.duration(b9)}if(ca.dow||D.isDuration(ce)||D.isDuration(b9)){cb.start=ce?D.duration(ce):null;cb.end=b9?D.duration(b9):null;cb._recurring=true}else{if(ce){ce=b1.moment(ce);if(!ce.isValid()){return false}}if(b9){b9=b1.moment(b9);if(!b9.isValid()){b9=null}}cc=ca.allDay;if(cc===undefined){cc=bl(cd?cd.allDayDefault:undefined,bR.allDayDefault)}bP(ce,b9,cc,cb)}return cb}function bP(cc,b9,cb,ca){ca.start=cc;ca.end=b9;ca.allDay=cb;b2(ca);aD(ca)}function b2(b9){bx(b9);if(b9.end&&!b9.end.isAfter(b9.start)){b9.end=null}if(!b9.end){if(bR.forceEventDuration){b9.end=b1.getDefaultEventEnd(b9.allDay,b9.start)}else{b9.end=null}}}function bx(b9){if(b9.allDay==null){b9.allDay=!(b9.start.hasTime()||(b9.end&&b9.end.hasTime()))}if(b9.allDay){b9.start.stripTime();if(b9.end){b9.end.stripTime()}}else{if(!b9.start.hasTime()){b9.start=b1.rezoneDate(b9.start)}if(b9.end&&!b9.end.hasTime()){b9.end=b1.rezoneDate(b9.end)}}}function bO(b9){var ca;if(!b9.end){ca=b9.allDay;if(ca==null){ca=!b9.start.hasTime()}b9=aW.extend({},b9);b9.end=b1.getDefaultEventEnd(ca,b9.start)}return b9}function b7(cg,cj,cc){var cl=[];var ci;var ck;var cf;var cd;var cb,ch;var ca,ce;var b9;cj=cj||bC;cc=cc||bG;if(cg){if(cg._recurring){if((ck=cg.dow)){ci={};for(cf=0;cf<ck.length;cf++){ci[ck[cf]]=true}}cd=cj.clone().stripTime();while(cd.isBefore(cc)){if(!ci||ci[cd.day()]){cb=cg.start;ch=cg.end;ca=cd.clone();ce=null;if(cb){ca=ca.time(cb)}if(ch){ce=cd.clone().time(ch)}b9=aW.extend({},cg);bP(ca,ce,!cb&&!ch,b9);cl.push(b9)}cd.add(1,"days")}}else{cl.push(cg)}}return cl}function bq(ca,cj,cb){var ce={};var ci;var b9;var cc;var cf;var ch;var cd;function cg(ck,cl){if(cb){return k(ck,cl,cb)}else{if(cj.allDay){return ad(ck,cl)}else{return w(ck,cl)}}}cj=cj||{};if(!cj.start){cj.start=ca.start.clone()}if(cj.end===undefined){cj.end=ca.end?ca.end.clone():null}if(cj.allDay==null){cj.allDay=ca.allDay}b2(cj);ci={start:ca._start.clone(),end:ca._end?ca._end.clone():b1.getDefaultEventEnd(ca._allDay,ca._start),allDay:cj.allDay};b2(ci);b9=ca._end!==null&&cj.end===null;cc=cg(cj.start,ci.start);if(cj.end){cf=cg(cj.end,ci.end);ch=cf.subtract(cc)}else{ch=null}aW.each(cj,function(ck,cl){if(bZ(ck)){if(cl!==undefined){ce[ck]=cl}}});cd=bS(bB(ca._id),b9,cj.allDay,cc,ch,ce);return{dateDelta:cc,durationDelta:ch,undo:cd}}function bS(cd,cg,cf,ce,cb,cc){var ca=b1.getIsAmbigTimezone();var b9=[];if(ce&&!ce.valueOf()){ce=null}if(cb&&!cb.valueOf()){cb=null}aW.each(cd,function(ci,ck){var ch;var cj;ch={start:ck.start.clone(),end:ck.end?ck.end.clone():null,allDay:ck.allDay};aW.each(cc,function(cl){ch[cl]=ck[cl]});cj={start:ck._start,end:ck._end,allDay:cf};b2(cj);if(cg){cj.end=null}else{if(cb&&!cj.end){cj.end=b1.getDefaultEventEnd(cj.allDay,cj.start)}}if(ce){cj.start.add(ce);if(cj.end){cj.end.add(ce)}}if(cb){cj.end.add(cb)}if(ca&&!cj.allDay&&(ce||cb)){cj.start.stripZone();if(cj.end){cj.end.stripZone()}}aW.extend(ck,cc,cj);aD(ck);b9.push(function(){aW.extend(ck,ch);aD(ck)})});return function(){for(var ch=0;ch<b9.length;ch++){b9[ch]()}}}b1.getBusinessHoursEvents=bH;function bH(b9){var cc=bR.businessHours;var cd={className:"fc-nonbusiness",start:"09:00",end:"17:00",dow:[1,2,3,4,5],rendering:"inverse-background"};var ca=b1.getView();var cb;if(cc){cb=aW.extend({},cd,typeof cc==="object"?cc:{})}if(cb){if(b9){cb.start=null;cb.end=null}return b7(bu(cb),ca.start,ca.end)}return[]}b1.isEventRangeAllowed=bL;b1.isSelectionRangeAllowed=bK;b1.isExternalDropRangeAllowed=bX;function bL(ca,cb){var cc=cb.source||{};var cd=bl(cb.constraint,cc.constraint,bR.eventConstraint);var b9=bl(cb.overlap,cc.overlap,bR.eventOverlap);ca=bO(ca);return bQ(ca,cd,b9,cb)}function bK(b9){return bQ(b9,bR.selectConstraint,bR.selectOverlap)}function bX(b9,cc){var ca;var cb;if(cc){ca=aW.extend({},cc,b9);cb=b7(bu(ca))[0]}if(cb){return bL(b9,cb)}else{b9=bO(b9);return bK(b9)}}function bQ(cf,cb,ch,ca){var b9;var cc;var ce;var cd,ci;var cg;cf=aW.extend({},cf);cf.start=cf.start.clone().stripZone();cf.end=cf.end.clone().stripZone();if(cb!=null){b9=bV(cb);cc=false;for(cd=0;cd<b9.length;cd++){if(bA(b9[cd],cf)){cc=true;break}}if(!cc){return false}}ce=b1.getPeerEvents(ca,cf);for(cd=0;cd<ce.length;cd++){ci=ce[cd];if(b4(ci,cf)){if(ch===false){return false}else{if(typeof ch==="function"&&!ch(ci,ca)){return false}}if(ca){cg=bl(ci.overlap,(ci.source||{}).overlap);if(cg===false){return false}if(typeof cg==="function"&&!cg(ca,ci)){return false}}}}return true}function bV(b9){if(b9==="businessHours"){return bH()}if(typeof b9==="object"){return b7(bu(b9))}return bB(b9)}function bA(cc,cb){var ca=cc.start.clone().stripZone();var b9=b1.getEventEnd(cc).stripZone();return cb.start>=ca&&cb.end<=b9}function b4(cc,cb){var ca=cc.start.clone().stripZone();var b9=b1.getEventEnd(cc).stripZone();return cb.start<b9&&cb.end>ca}b1.getEventCache=function(){return bE}}s.prototype.getPeerEvents=function(bu,br){var bq=this.getEventCache();var bp=[];var bt,bs;for(bt=0;bt<bq.length;bt++){bs=bq[bt];if(!bu||bu._id!==bs._id){bp.push(bs)}}return bp};function aD(bp){bp._allDay=bp.allDay;bp._start=bp.start.clone();bp._end=bp.end?bp.end.clone():null}var B=aJ.basic=bh.extend({dayGrid:null,dayNumbersVisible:false,weekNumbersVisible:false,weekNumberWidth:null,headRowEl:null,initialize:function(){this.dayGrid=new a7(this);this.coordMap=this.dayGrid.coordMap},setRange:function(bp){bh.prototype.setRange.call(this,bp);this.dayGrid.breakOnWeeks=/year|month|week/.test(this.intervalUnit);this.dayGrid.setRange(bp)},computeRange:function(bq){var bp=bh.prototype.computeRange.call(this,bq);if(/year|month/.test(bp.intervalUnit)){bp.start.startOf("week");bp.start=this.skipHiddenDays(bp.start);if(bp.end.weekday()){bp.end.add(1,"week").startOf("week");bp.end=this.skipHiddenDays(bp.end,-1,true)}}return bp},render:function(){this.dayNumbersVisible=this.dayGrid.rowCnt>1;this.weekNumbersVisible=this.opt("weekNumbers");this.dayGrid.numbersVisible=this.dayNumbersVisible||this.weekNumbersVisible;this.el.addClass("fc-basic-view").html(this.renderHtml());this.headRowEl=this.el.find("thead .fc-row");this.scrollerEl=this.el.find(".fc-day-grid-container");this.dayGrid.coordMap.containerEl=this.scrollerEl;this.dayGrid.setElement(this.el.find(".fc-day-grid"));this.dayGrid.renderDates(this.hasRigidRows())},destroy:function(){this.dayGrid.destroyDates();this.dayGrid.removeElement()},renderBusinessHours:function(){this.dayGrid.renderBusinessHours()},renderHtml:function(){return'<table><thead class="fc-head"><tr><td>'+this.dayGrid.headHtml()+'</td></tr></thead><tbody class="fc-body"><tr><td class="'+this.widgetContentClass+'"><div class="fc-day-grid-container"><div class="fc-day-grid"/></div></td></tr></tbody></table>'},headIntroHtml:function(){if(this.weekNumbersVisible){return'<th class="fc-week-number '+this.widgetHeaderClass+'" '+this.weekNumberStyleAttr()+"><span>"+bj(this.opt("weekNumberTitle"))+"</span></th>"}},numberIntroHtml:function(bp){if(this.weekNumbersVisible){return'<td class="fc-week-number" '+this.weekNumberStyleAttr()+"><span>"+this.dayGrid.getCell(bp,0).start.format("w")+"</span></td>"}},dayIntroHtml:function(){if(this.weekNumbersVisible){return'<td class="fc-week-number '+this.widgetContentClass+'" '+this.weekNumberStyleAttr()+"></td>"}},introHtml:function(){if(this.weekNumbersVisible){return'<td class="fc-week-number" '+this.weekNumberStyleAttr()+"></td>"}},numberCellHtml:function(bp){var bq=bp.start;var br;if(!this.dayNumbersVisible){return"<td/>"}br=this.dayGrid.getDayClasses(bq);br.unshift("fc-day-number");return'<td class="'+br.join(" ")+'" data-date="'+bq.format()+'">'+bq.date()+"</td>"},weekNumberStyleAttr:function(){if(this.weekNumberWidth!==null){return'style="width:'+this.weekNumberWidth+'px"'}return""},hasRigidRows:function(){var bp=this.opt("eventLimit");return bp&&typeof bp!=="number"},updateWidth:function(){if(this.weekNumbersVisible){this.weekNumberWidth=M(this.el.find(".fc-week-number"))}},setHeight:function(br,bp){var bq=this.opt("eventLimit");var bs;u(this.scrollerEl);at(this.headRowEl);this.dayGrid.destroySegPopover();if(bq&&typeof bq==="number"){this.dayGrid.limitRows(bq)}bs=this.computeScrollerHeight(br);this.setGridHeight(bs,bp);if(bq&&typeof bq!=="number"){this.dayGrid.limitRows(bq)}if(!bp&&bd(this.scrollerEl,bs)){bc(this.headRowEl,l(this.scrollerEl));bs=this.computeScrollerHeight(br);this.scrollerEl.height(bs)}},setGridHeight:function(bq,bp){if(bp){d(this.dayGrid.rowEls)}else{K(this.dayGrid.rowEls,bq,true)}},renderEvents:function(bp){this.dayGrid.renderEvents(bp);this.updateHeight()},getEventSegs:function(){return this.dayGrid.getEventSegs()},destroyEvents:function(){this.dayGrid.destroyEvents()},renderDrag:function(bq,bp){return this.dayGrid.renderDrag(bq,bp)},destroyDrag:function(){this.dayGrid.destroyDrag()},renderSelection:function(bp){this.dayGrid.renderSelection(bp)},destroySelection:function(){this.dayGrid.destroySelection()}});var aG=aJ.month=B.extend({computeRange:function(bq){var bp=B.prototype.computeRange.call(this,bq);var br;if(this.isFixedWeeks()){br=Math.ceil(bp.end.diff(bp.start,"weeks",true));bp.end.add(6-br,"weeks")}return bp},setGridHeight:function(bq,bp){bp=bp||this.opt("weekMode")==="variable";if(bp){bq*=this.rowCnt/6}K(this.dayGrid.rowEls,bq,!bp)},isFixedWeeks:function(){var bp=this.opt("weekMode");if(bp){return bp==="fixed"}return this.opt("fixedWeekCount")}});aG.duration={months:1};aG.defaults={fixedWeekCount:true};aJ.basicWeek={type:"basic",duration:{weeks:1}};aJ.basicDay={type:"basic",duration:{days:1}};var S={allDaySlot:true,allDayText:"all-day",scrollTime:"08:00:00",slotDuration:"00:30:00",minTime:"00:00:00",maxTime:"24:00:00",slotEventOverlap:true};var a=5;var Q=aJ.agenda=bh.extend({timeGrid:null,dayGrid:null,axisWidth:null,noScrollRowEls:null,bottomRuleEl:null,bottomRuleHeight:null,initialize:function(){this.timeGrid=new i(this);if(this.opt("allDaySlot")){this.dayGrid=new a7(this);this.coordMap=new H([this.dayGrid.coordMap,this.timeGrid.coordMap])}else{this.coordMap=this.timeGrid.coordMap}},setRange:function(bp){bh.prototype.setRange.call(this,bp);this.timeGrid.setRange(bp);if(this.dayGrid){this.dayGrid.setRange(bp)}},render:function(){this.el.addClass("fc-agenda-view").html(this.renderHtml());this.scrollerEl=this.el.find(".fc-time-grid-container");this.timeGrid.coordMap.containerEl=this.scrollerEl;this.timeGrid.setElement(this.el.find(".fc-time-grid"));this.timeGrid.renderDates();this.bottomRuleEl=aW('<hr class="fc-divider '+this.widgetHeaderClass+'"/>').appendTo(this.timeGrid.el);if(this.dayGrid){this.dayGrid.setElement(this.el.find(".fc-day-grid"));this.dayGrid.renderDates();this.dayGrid.bottomCoordPadding=this.dayGrid.el.next("hr").outerHeight()}this.noScrollRowEls=this.el.find(".fc-row:not(.fc-scroller *)")},destroy:function(){this.timeGrid.destroyDates();this.timeGrid.removeElement();if(this.dayGrid){this.dayGrid.destroyDates();this.dayGrid.removeElement()}},renderBusinessHours:function(){this.timeGrid.renderBusinessHours();if(this.dayGrid){this.dayGrid.renderBusinessHours()}},renderHtml:function(){return'<table><thead class="fc-head"><tr><td>'+this.timeGrid.headHtml()+'</td></tr></thead><tbody class="fc-body"><tr><td class="'+this.widgetContentClass+'">'+(this.dayGrid?'<div class="fc-day-grid"/><hr class="fc-divider '+this.widgetHeaderClass+'"/>':"")+'<div class="fc-time-grid-container"><div class="fc-time-grid"/></div></td></tr></tbody></table>'},headIntroHtml:function(){var bp;var bq;if(this.opt("weekNumbers")){bp=this.timeGrid.getCell(0).start;bq=bp.format(this.opt("smallWeekFormat"));return'<th class="fc-axis fc-week-number '+this.widgetHeaderClass+'" '+this.axisStyleAttr()+"><span>"+bj(bq)+"</span></th>"}else{return'<th class="fc-axis '+this.widgetHeaderClass+'" '+this.axisStyleAttr()+"></th>"}},dayIntroHtml:function(){return'<td class="fc-axis '+this.widgetContentClass+'" '+this.axisStyleAttr()+"><span>"+(this.opt("allDayHtml")||bj(this.opt("allDayText")))+"</span></td>"},slotBgIntroHtml:function(){return'<td class="fc-axis '+this.widgetContentClass+'" '+this.axisStyleAttr()+"></td>"},introHtml:function(){return'<td class="fc-axis" '+this.axisStyleAttr()+"></td>"},axisStyleAttr:function(){if(this.axisWidth!==null){return'style="width:'+this.axisWidth+'px"'}return""},updateSize:function(bp){this.timeGrid.updateSize(bp);bh.prototype.updateSize.call(this,bp)},updateWidth:function(){this.axisWidth=M(this.el.find(".fc-axis"))},setHeight:function(br,bp){var bq;var bs;if(this.bottomRuleHeight===null){this.bottomRuleHeight=this.bottomRuleEl.outerHeight()}this.bottomRuleEl.hide();this.scrollerEl.css("overflow","");u(this.scrollerEl);at(this.noScrollRowEls);if(this.dayGrid){this.dayGrid.destroySegPopover();bq=this.opt("eventLimit");if(bq&&typeof bq!=="number"){bq=a}if(bq){this.dayGrid.limitRows(bq)}}if(!bp){bs=this.computeScrollerHeight(br);if(bd(this.scrollerEl,bs)){bc(this.noScrollRowEls,l(this.scrollerEl));bs=this.computeScrollerHeight(br);this.scrollerEl.height(bs)}else{this.scrollerEl.height(bs).css("overflow","hidden");this.bottomRuleEl.show()}}},computeInitialScroll:function(){var bq=D.duration(this.opt("scrollTime"));var bp=this.timeGrid.computeTimeTop(bq);bp=Math.ceil(bp);if(bp){bp++}return bp},renderEvents:function(bq){var bt=[];var br=[];var bu=[];var bs;var bp;for(bp=0;bp<bq.length;bp++){if(bq[bp].allDay){bt.push(bq[bp])}else{br.push(bq[bp])}}bs=this.timeGrid.renderEvents(br);if(this.dayGrid){bu=this.dayGrid.renderEvents(bt)}this.updateHeight()},getEventSegs:function(){return this.timeGrid.getEventSegs().concat(this.dayGrid?this.dayGrid.getEventSegs():[])},destroyEvents:function(){this.timeGrid.destroyEvents();if(this.dayGrid){this.dayGrid.destroyEvents()}},renderDrag:function(bq,bp){if(bq.start.hasTime()){return this.timeGrid.renderDrag(bq,bp)}else{if(this.dayGrid){return this.dayGrid.renderDrag(bq,bp)}}},destroyDrag:function(){this.timeGrid.destroyDrag();if(this.dayGrid){this.dayGrid.destroyDrag()}},renderSelection:function(bp){if(bp.start.hasTime()||bp.end.hasTime()){this.timeGrid.renderSelection(bp)}else{if(this.dayGrid){this.dayGrid.renderSelection(bp)}}},destroySelection:function(){this.timeGrid.destroySelection();if(this.dayGrid){this.dayGrid.destroySelection()}}});Q.defaults=S;aJ.agendaWeek={type:"agenda",duration:{weeks:1}};aJ.agendaDay={type:"agenda",duration:{days:1}};return be});